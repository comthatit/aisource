<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI í¸í–¥ íƒì •ë‹¨</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .bounce { animation: bounce 0.5s ease; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .shake { animation: shake 0.5s ease; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px); } 75% { transform: translateX(10px); } }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useRef, useEffect } = React;
        const MAX_SCORE = 140;
        const STAGE1_MAX = 40;
        const STAGE2_MAX = 60;
        const STAGE3_MAX = 40;

        function AIBiasDetective() {
            const [stage, setStage] = useState(0);
            const [scores, setScores] = useState({ stage1: 0, stage2: 0, stage3: 0 });
            const [completedStages, setCompletedStages] = useState({
                stage1: {}, stage2: {}, stage3: {}
            });
            const [allStagesCompleted, setAllStagesCompleted] = useState(false);
            const totalScore = scores.stage1 + scores.stage2 + scores.stage3;
            
            const updateScore = (stageKey, points) => {
                setScores(prev => ({ ...prev, [stageKey]: prev[stageKey] + points }));
            };
            
            const goToStage = (stageNum) => setStage(stageNum);

            const stages = [
                { component: IntroStage },
                { component: Stage1 },
                { component: Stage2 },
                { component: Stage3 },
                { component: Stage4 }
            ];
            const CurrentComponent = stages[stage].component;

            const stage1Done = Object.keys(completedStages.stage1).length === 4;
            const stage2Done = Object.keys(completedStages.stage2).length === 4;
            const stage3Done = Object.keys(completedStages.stage3).length === 4;

            return (
                <div className="min-h-screen py-8 px-4">
                    <div className="max-w-5xl mx-auto">
                        <div className="text-center mb-6 fade-in">
                            <h1 className="text-4xl md:text-5xl font-bold text-white mb-4">ğŸ•µï¸ AI í¸í–¥ íƒì •ë‹¨</h1>
                            <p className="text-xl text-white opacity-90">ê³µì •í•œ AIë¥¼ ì°¾ì•„ë¼!</p>
                        </div>
                        {stage > 0 && (
                            <div className="mb-6 no-print">
                                <div className="bg-white bg-opacity-20 rounded-2xl p-4 backdrop-blur-sm mb-4">
                                    <div className="flex justify-between items-center">
                                        <div className="text-white font-bold text-lg">
                                            ğŸ† ëˆ„ì  ì ìˆ˜: <span className="text-yellow-300 text-2xl">{totalScore}</span> / {MAX_SCORE}ì 
                                        </div>
                                        <div className="text-white font-bold text-lg">ğŸ“ {stage}/4 ë‹¨ê³„</div>
                                    </div>
                                </div>
                                <div className="bg-white bg-opacity-20 rounded-2xl p-4 backdrop-blur-sm">
                                    <div className="flex justify-around items-center">
                                        {['ê³µì •í•¨ ì´í•´', 'AI í¸í–¥ ì°¾ê¸°', 'í•µì‹¬ ì •ë¦¬', 'ê²°ê³¼ í™•ì¸'].map((title, idx) => {
                                            const stageNum = idx + 1;
                                            const isCurrentStage = stageNum === stage;
                                            const isCompleted = (stageNum === 1 && stage1Done) || (stageNum === 2 && stage2Done) || (stageNum === 3 && stage3Done) || (stageNum === 4 && allStagesCompleted);
                                            const canAccess = stageNum <= stage || allStagesCompleted;
                                            
                                            return (
                                                <button key={idx} onClick={() => goToStage(stageNum)}
                                                    disabled={!canAccess}
                                                    className={`flex flex-col items-center px-3 py-2 rounded-xl transition-all duration-300 ${
                                                        isCurrentStage ? 'bg-purple-500 text-white scale-110'
                                                        : isCompleted ? 'bg-lime-400 text-white hover:scale-105'
                                                        : 'bg-white bg-opacity-30 text-white opacity-50 cursor-not-allowed'
                                                    }`}>
                                                    <div className="text-xl mb-1">
                                                        {isCompleted ? 'âœ“' : isCurrentStage ? 'â–¶' : stageNum}
                                                    </div>
                                                    <div className="text-xs font-bold">{title}</div>
                                                </button>
                                            );
                                        })}
                                    </div>
                                </div>
                            </div>
                        )}
                        <CurrentComponent
                            goToStage={goToStage} updateScore={updateScore} scores={scores} totalScore={totalScore}
                            completedStages={completedStages} setCompletedStages={setCompletedStages}
                            setAllStagesCompleted={setAllStagesCompleted}
                        />
                    </div>
                </div>
            );
        }

        function IntroStage({ goToStage }) {
            return (
                <div className="bg-white rounded-3xl shadow-2xl p-8 md:p-12 fade-in">
                    <div className="text-center mb-8">
                        <div className="text-6xl mb-6 bounce">ğŸ¯</div>
                        <h2 className="text-3xl font-bold text-gray-800 mb-4">AI í¸í–¥ íƒì •ì´ ë˜ì–´ë³¼ê¹Œìš”?</h2>
                        <p className="text-lg text-gray-600 leading-relaxed mb-6">
                            ìš°ë¦¬ ì£¼ë³€ì˜ AIëŠ” ì •ë§ ê³µì •í• ê¹Œìš”?<br/>í•¨ê»˜ AIì˜ í¸í–¥ì„ ì°¾ì•„ë‚´ëŠ” íƒì •ì´ ë˜ì–´ë´…ì‹œë‹¤!
                        </p>
                    </div>
                    <div className="bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-8 mb-8 border-2 border-purple-200">
                        <h3 className="text-2xl font-bold text-purple-800 mb-6 text-center">ğŸ® íƒì • í™œë™ ë¯¸ì…˜</h3>
                        <div className="space-y-4">
                            {[
                                { icon: '1ï¸âƒ£', title: 'ê³µì •í•¨ ì´í•´í•˜ê¸° (40ì )', desc: 'O/X í€´ì¦ˆë¡œ ê³µì •í•¨ì˜ ì˜ë¯¸ë¥¼ ë°°ì›Œìš”' },
                                { icon: '2ï¸âƒ£', title: 'AI í¸í–¥ ì°¾ê¸° (60ì )', desc: 'AIê°€ ë§Œë“  ê²°ê³¼ë¬¼ì—ì„œ í¸í–¥ì„ ì°¾ì•„ìš”' },
                                { icon: '3ï¸âƒ£', title: 'í•µì‹¬ ì •ë¦¬ (40ì )', desc: 'ë°°ìš´ ë‚´ìš©ì„ ì •ë¦¬í•´ìš”' },
                                { icon: '4ï¸âƒ£', title: 'ê²°ê³¼ í™•ì¸', desc: 'ì¸ì¦ì„œë¥¼ ë°›ì•„ìš”' }
                            ].map((item, i) => (
                                <div key={i} className="flex items-start bg-white bg-opacity-60 rounded-xl p-4">
                                    <span className="text-3xl mr-4">{item.icon}</span>
                                    <div>
                                        <h4 className="font-bold text-lg text-gray-800 mb-1">{item.title}</h4>
                                        <p className="text-gray-600">{item.desc}</p>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                    <button onClick={() => goToStage(1)} className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xl font-bold py-5 px-8 rounded-2xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300">
                        íƒì • í™œë™ ì‹œì‘í•˜ê¸°! ğŸš€
                    </button>
                </div>
            );
        }

        function Stage1({ goToStage, updateScore, completedStages, setCompletedStages }) {
            const [currentQ, setCurrentQ] = useState(0);
            const [showFeedback, setShowFeedback] = useState(false);
            const [selectedAnswer, setSelectedAnswer] = useState(null);
            const [attempts, setAttempts] = useState({});

            const questions = [
                { id: 1, emoji: "ğŸ“", situation: "í•™êµì—ì„œ ìˆ˜í•™ ì„±ì ì´ ë†’ì€ í•™ìƒë“¤ì—ê²Œë§Œ\níŠ¹ë³„ í”„ë¡œê·¸ë¨ ì°¸ì—¬ ê¸°íšŒë¥¼ ì¤ë‹ˆë‹¤.", question: "ì´ê²ƒì€ ê³µì •í•œê°€ìš”?", correctAnswer: "O",
                  explanation: { O: "ì •ë‹µì´ì—ìš”! ëŠ¥ë ¥ì— ë”°ë¼ ë‹¤ë¥¸ ê¸°íšŒë¥¼ ì£¼ëŠ” ê²ƒì€ ê³µì •í•  ìˆ˜ ìˆì–´ìš”.", X: "ì•„ì‰¬ì›Œìš”. ì´ê±´ ê³µì •í•´ìš”! ëª¨ë“  í•™ìƒì´ ì‹œí—˜ì„ ë³¼ ê¸°íšŒê°€ ìˆì—ˆê³ , ì„±ì ì´ë¼ëŠ” ê°ê´€ì  ê¸°ì¤€ìœ¼ë¡œ ì„ ë°œí–ˆì–´ìš”." }},
                { id: 2, emoji: "âš½", situation: "ì¶•êµ¬íŒ€ ì£¼ì¥ ì„ ê±°ì—ì„œ ë‚¨í•™ìƒë§Œ í›„ë³´ë¡œ\në“±ë¡í•  ìˆ˜ ìˆë‹¤ê³  í•©ë‹ˆë‹¤.", question: "ì´ê²ƒì€ ê³µì •í•œê°€ìš”?", correctAnswer: "X",
                  explanation: { O: "ì•„ì‰¬ì›Œìš”. ì´ê±´ ë¶ˆê³µì •í•´ìš”! ì„±ë³„ë¡œ ê¸°íšŒë¥¼ ì œí•œí•˜ëŠ” ê²ƒì€ ì°¨ë³„ì´ì—ìš”.", X: "ì •ë‹µì´ì—ìš”! ì„±ë³„ë¡œ ê¸°íšŒë¥¼ ì œí•œí•˜ëŠ” ê²ƒì€ ë¶ˆê³µì •í•´ìš”." }},
                { id: 3, emoji: "ğŸ¨", situation: "ë¯¸ìˆ  ëŒ€íšŒì—ì„œ ì‹¬ì‚¬ìœ„ì›ì´ ìì‹ ì´ ì¢‹ì•„í•˜ëŠ”\nìŠ¤íƒ€ì¼ì˜ ê·¸ë¦¼ì—ë§Œ ë†’ì€ ì ìˆ˜ë¥¼ ì¤ë‹ˆë‹¤.", question: "ì´ê²ƒì€ ê³µì •í•œê°€ìš”?", correctAnswer: "X",
                  explanation: { O: "ì•„ì‰¬ì›Œìš”. ì´ê±´ ë¶ˆê³µì •í•´ìš”! ê°œì¸ì ì¸ ì·¨í–¥ë§Œìœ¼ë¡œ í‰ê°€í•˜ë©´ ì•ˆ ë¼ìš”.", X: "ì •ë‹µì´ì—ìš”! ê°œì¸ ì·¨í–¥ë§Œìœ¼ë¡œ í‰ê°€í•˜ëŠ” ê²ƒì€ ë¶ˆê³µì •í•´ìš”." }},
                { id: 4, emoji: "ğŸ¦½", situation: "ì‹œí—˜ ì‹œê°„ì— ì¥ì• ê°€ ìˆëŠ” í•™ìƒì—ê²Œë§Œ\nì¶”ê°€ ì‹œê°„ì„ ë” ì¤ë‹ˆë‹¤.", question: "ì´ê²ƒì€ ê³µì •í•œê°€ìš”?", correctAnswer: "O",
                  explanation: { O: "ì •ë‹µì´ì—ìš”! ì¥ì• ë¡œ ì¸í•œ ë¶ˆë¦¬í•¨ì„ ë³´ì™„í•´ì£¼ëŠ” ê²ƒì€ 'í˜•í‰ì„±'ì´ì—ìš”.", X: "ì•„ì‰¬ì›Œìš”. ì´ê±´ ì‚¬ì‹¤ ê³µì •í•´ìš”! ì¥ì• ë¡œ ì¸í•œ ë¶ˆë¦¬í•¨ì„ ë³´ì™„í•´ì£¼ëŠ” ê²ƒì€ ì§„ì •í•œ ê³µì •í•¨ì„ ìœ„í•´ í•„ìš”í•´ìš”." }}
            ];

            const handleAnswer = (answer) => {
                const qId = questions[currentQ].id;
                const currentAttempts = (attempts[qId] || 0) + 1;
                setAttempts(prev => ({ ...prev, [qId]: currentAttempts }));
                setSelectedAnswer(answer);
                setShowFeedback(true);
                const isCorrect = answer === questions[currentQ].correctAnswer;
                
                if (isCorrect) {
                    let points = 10;
                    if (currentAttempts === 2) points = 7;
                    updateScore('stage1', points);
                    setCompletedStages(prev => ({
                        ...prev, stage1: { ...prev.stage1, [qId]: true }
                    }));
                } else if (currentAttempts >= 2) {
                    setCompletedStages(prev => ({
                        ...prev, stage1: { ...prev.stage1, [qId]: true }
                    }));
                }
            };

            const handleNext = () => {
                const isCorrect = selectedAnswer === questions[currentQ].correctAnswer;
                const twoAttemptsFailed = attempts[questions[currentQ].id] >= 2 && !isCorrect;
                if (isCorrect || twoAttemptsFailed) {
                    if (currentQ < questions.length - 1) {
                        setCurrentQ(currentQ + 1);
                        setShowFeedback(false);
                        setSelectedAnswer(null);
                    } else {
                        goToStage(2);
                    }
                } else {
                    setShowFeedback(false);
                    setSelectedAnswer(null);
                }
            };

            const q = questions[currentQ];
            const isCorrect = selectedAnswer === q.correctAnswer;

            return (
                <div className="bg-white rounded-3xl shadow-2xl p-8 md:p-12 fade-in">
                    <div className="text-center mb-8">
                        <div className="text-5xl mb-4">{q.emoji}</div>
                        <div className="inline-block bg-purple-100 text-purple-800 px-4 py-2 rounded-full font-bold mb-4">ë¬¸ì œ {currentQ + 1} / {questions.length}</div>
                        <h2 className="text-3xl font-bold text-gray-800 mb-4">ê³µì •í•¨ ì´í•´í•˜ê¸°</h2>
                    </div>
                    <div className="bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-8 mb-8 border-2 border-purple-200">
                        <p className="text-xl text-gray-800 leading-relaxed text-center whitespace-pre-line mb-6">{q.situation}</p>
                        <p className="text-2xl font-bold text-center text-purple-700">{q.question}</p>
                    </div>
                    {!showFeedback ? (
                        <div className="grid grid-cols-2 gap-6 mb-6">
                            <button onClick={() => handleAnswer('O')} className="bg-green-100 hover:bg-green-200 border-4 border-green-300 text-green-800 font-bold text-3xl py-12 rounded-2xl transform hover:scale-105 transition-all">
                                <div className="text-5xl mb-2">â­•</div>ê³µì •í•´ìš”
                            </button>
                            <button onClick={() => handleAnswer('X')} className="bg-red-100 hover:bg-red-200 border-4 border-red-300 text-red-800 font-bold text-3xl py-12 rounded-2xl transform hover:scale-105 transition-all">
                                <div className="text-5xl mb-2">âŒ</div>ë¶ˆê³µì •í•´ìš”
                            </button>
                        </div>
                    ) : (
                        <div className={`rounded-2xl p-6 mb-6 fade-in border-4 ${isCorrect ? 'bg-green-50 border-green-300' : 'bg-orange-50 border-orange-300 shake'}`}>
                            <div className="flex items-start mb-4">
                                <div className="text-5xl mr-4">{isCorrect ? 'ğŸ‰' : (attempts[q.id] >= 2 ? 'ğŸ˜¢' : 'ğŸ’­')}</div>
                                <div className="flex-1">
                                    <h3 className={`text-2xl font-bold mb-3 ${isCorrect ? 'text-green-800' : 'text-orange-800'}`}>
                                        {isCorrect ? 'ì •ë‹µì…ë‹ˆë‹¤!' : (attempts[q.id] >= 2 ? 'ì•„ì‰¬ì›Œìš”!' : 'ë‹¤ì‹œ ìƒê°í•´ë´ìš”!')}
                                    </h3>
                                    <p className="text-lg text-gray-700 leading-relaxed">{q.explanation[selectedAnswer]}</p>
                                    {!isCorrect && attempts[q.id] >= 2 && (
                                        <p className="mt-3 text-sm text-gray-600 bg-white bg-opacity-50 rounded-lg p-3">ğŸ’¡ 2ë²ˆì˜ ê¸°íšŒë¥¼ ëª¨ë‘ ì‚¬ìš©í–ˆì–´ìš”.</p>
                                    )}
                                </div>
                            </div>
                        </div>
                    )}
                    <div className="flex gap-4">
                        {currentQ > 0 && (
                            <button onClick={() => { setCurrentQ(currentQ - 1); setShowFeedback(false); setSelectedAnswer(null); }} className="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-4 px-6 rounded-2xl transition-all">â† ì´ì „ ë¬¸ì œ</button>
                        )}
                        {showFeedback && (
                            <button onClick={handleNext} className="flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xl font-bold py-4 px-8 rounded-2xl hover:shadow-2xl transform hover:scale-105 transition-all">
                                {isCorrect ? (currentQ < questions.length - 1 ? 'ë‹¤ìŒ ë¬¸ì œ â†’' : 'í¸í–¥ ì°¾ê¸° ì‹œì‘! ğŸ”')
                                : (attempts[q.id] >= 2 ? (currentQ < questions.length - 1 ? 'ë‹¤ìŒ ë¬¸ì œ â†’' : 'í¸í–¥ ì°¾ê¸° ì‹œì‘! ğŸ”') : 'ë‹¤ì‹œ ë„ì „í•˜ê¸° ğŸ”„')}
                            </button>
                        )}
                    </div>
                </div>
            );
        }

        function Stage2({ goToStage, updateScore, completedStages, setCompletedStages }) {
            const [currentCase, setCurrentCase] = useState(0);
            const [selectedImage, setSelectedImage] = useState(null);
            const [showFeedback, setShowFeedback] = useState(false);
            const [attempts, setAttempts] = useState({});

            const cases = [
                { id: 1, title: "AIê°€ ê·¸ë¦° 'í”„ë¡œê·¸ë˜ë¨¸' ê·¸ë¦¼", emoji: "ğŸ’»", question: "í¸í–¥ì´ ì—†ëŠ” ê³µì •í•œ ê·¸ë¦¼ì€?",
                  images: [
                    { id: 'A', visual: 'ğŸ‘¨ğŸ»â€ğŸ’»ğŸ‘©ğŸ¾â€ğŸ’»ğŸ‘©ğŸ¼â€ğŸ’»', detail: 'í™©ì¸ ë‚¨ì„±, í‘ì¸ ì—¬ì„±, ë°±ì¸ ì—¬ì„±', biased: false,
                      feedback: { title: 'ê³µì •í•´ìš”! ğŸ‰', reason: 'ì„±ë³„ê³¼ ì¸ì¢…ì´ ë‹¤ì–‘í•´ìš”', explanation: 'í”„ë¡œê·¸ë˜ë¨¸ëŠ” ëˆ„êµ¬ë‚˜ ë  ìˆ˜ ìˆì–´ìš”.' }},
                    { id: 'B', visual: 'ğŸ‘¨ğŸ»â€ğŸ’»ğŸ‘¨ğŸ»â€ğŸ’»ğŸ‘¨ğŸ»â€ğŸ’»', detail: 'ì Šì€ ë‚¨ì„±, ì Šì€ ë‚¨ì„±, ì Šì€ ë‚¨ì„±', biased: true,
                      feedback: { title: 'í¸í–¥ì´ ìˆì–´ìš”! ğŸš¨', reason: 'í•œ ê°€ì§€ë§Œ í‘œí˜„ë˜ì—ˆì–´ìš”', explanation: 'ì—¬ì„± ê°œë°œìë„ ë§ì´ ìˆì–´ìš”.' }}
                  ]},
                { id: 2, title: "AIê°€ ê·¸ë¦° 'ê°„í˜¸ì‚¬' ê·¸ë¦¼", emoji: "ğŸ‘¨â€âš•ï¸", question: "í¸í–¥ì´ ì—†ëŠ” ê³µì •í•œ ê·¸ë¦¼ì€?",
                  images: [
                    { id: 'A', visual: 'ğŸ‘©ğŸ»â€âš•ï¸ğŸ‘©ğŸ½â€âš•ï¸ğŸ‘©ğŸ¼â€âš•ï¸', detail: 'í™©ì¸ ì—¬ì„±, í‘ì¸ ì—¬ì„±, ë°±ì¸ ì—¬ì„±', biased: true,
                      feedback: { title: 'í¸í–¥ì´ ìˆì–´ìš”! ğŸš¨', reason: 'í•œ ê°€ì§€ ì„±ë³„ë§Œ', explanation: 'ë‚¨ì ê°„í˜¸ì‚¬ë„ ë§ì•„ìš”.' }},
                    { id: 'B', visual: 'ğŸ‘¨ğŸ»â€âš•ï¸ğŸ‘©ğŸ½â€âš•ï¸ğŸ‘¨ğŸ¾â€âš•ï¸', detail: 'í™©ì¸ ë‚¨ì„±, í‘ì¸ ì—¬ì„±, í‘ì¸ ë‚¨ì„±', biased: false,
                      feedback: { title: 'ê³µì •í•´ìš”! ğŸŒŸ', reason: 'ë‹¤ì–‘í•˜ê²Œ í‘œí˜„í–ˆì–´ìš”', explanation: 'ê°„í˜¸ì‚¬ëŠ” ëˆ„êµ¬ë‚˜ ë  ìˆ˜ ìˆì–´ìš”.' }}
                  ]},
                { id: 3, title: "AIê°€ ê·¸ë¦° 'ê±´ì¶•ê°€' ê·¸ë¦¼", emoji: "ğŸ—ï¸", question: "í¸í–¥ì´ ì—†ëŠ” ê³µì •í•œ ê·¸ë¦¼ì€?",
                  images: [
                    { id: 'A', visual: 'ğŸ‘©ğŸ»ğŸ‘¨ğŸ½ğŸ‘´ğŸ¾', detail: 'ì Šì€ ì—¬ì„±, ì Šì€ ë‚¨ì„±, ì‹œë‹ˆì–´ ë‚¨ì„±', biased: false,
                      feedback: { title: 'ê³µì •í•´ìš”! ğŸ¯', reason: 'ë‹¤ì–‘í•˜ê²Œ í‘œí˜„í–ˆì–´ìš”', explanation: 'ê±´ì¶•ê°€ëŠ” ëˆ„êµ¬ë‚˜ ë  ìˆ˜ ìˆì–´ìš”.' }},
                    { id: 'B', visual: 'ğŸ‘´ğŸ»ğŸ‘´ğŸ»ğŸ‘´ğŸ»', detail: 'ì‹œë‹ˆì–´ ë‚¨ì„±, ì‹œë‹ˆì–´ ë‚¨ì„±, ì‹œë‹ˆì–´ ë‚¨ì„±', biased: true,
                      feedback: { title: 'í¸í–¥ì´ ìˆì–´ìš”! ğŸš¨', reason: 'íŠ¹ì • ë‚˜ì´ëŒ€ë§Œ', explanation: 'ì Šì€ ê±´ì¶•ê°€, ì—¬ì„± ê±´ì¶•ê°€ë„ ë§ì•„ìš”.' }}
                  ]},
                { id: 4, title: "AIê°€ ê·¸ë¦° 'ì„ ìƒë‹˜' ê·¸ë¦¼", emoji: "ğŸ‘¨â€ğŸ«", question: "í¸í–¥ì´ ì—†ëŠ” ê³µì •í•œ ê·¸ë¦¼ì€?",
                  images: [
                    { id: 'A', visual: 'ğŸ‘¨ğŸ»â€ğŸ«ğŸ‘©ğŸ»â€ğŸ«ğŸ‘¨ğŸ»â€ğŸ«', detail: 'ë°±ì¸ ë‚¨ì„±, ë°±ì¸ ì—¬ì„±, ë°±ì¸ ë‚¨ì„±', biased: true,
                      feedback: { title: 'í¸í–¥ì´ ìˆì–´ìš”! ğŸ¤”', reason: 'í•œ ê°€ì§€ ì¸ì¢…ë§Œ', explanation: 'ë‹¤ì–‘í•œ ì¸ì¢…ì˜ ì„ ìƒë‹˜ì´ ìˆì–´ìš”.' }},
                    { id: 'B', visual: 'ğŸ‘¨ğŸ»â€ğŸ«ğŸ‘©ğŸ½â€ğŸ«ğŸ‘¨ğŸ¾â€ğŸ«', detail: 'ë°±ì¸ ë‚¨ì„±, í‘ì¸ ì—¬ì„±, í‘ì¸ ë‚¨ì„±', biased: false,
                      feedback: { title: 'ê³µì •í•´ìš”! ğŸŒ', reason: 'ë‹¤ì–‘í•˜ê²Œ í‘œí˜„í–ˆì–´ìš”', explanation: 'ì„ ìƒë‹˜ì€ ëˆ„êµ¬ë‚˜ ë  ìˆ˜ ìˆì–´ìš”.' }}
                  ]}
            ];

            const handleSelect = (image) => {
                const caseId = cases[currentCase].id;
                const currentAttempts = (attempts[caseId] || 0) + 1;
                setAttempts(prev => ({ ...prev, [caseId]: currentAttempts }));
                setSelectedImage(image);
                setShowFeedback(true);
                const isCorrect = !image.biased;
                
                if (isCorrect) {
                    let points = 15;
                    if (currentAttempts === 2) points = 10;
                    updateScore('stage2', points);
                    setCompletedStages(prev => ({
                        ...prev, stage2: { ...prev.stage2, [caseId]: true }
                    }));
                } else if (currentAttempts >= 2) {
                    setCompletedStages(prev => ({
                        ...prev, stage2: { ...prev.stage2, [caseId]: true }
                    }));
                }
            };

            const handleNext = () => {
                const isCorrect = !selectedImage.biased;
                const twoAttemptsFailed = attempts[cases[currentCase].id] >= 2 && selectedImage.biased;
                if (isCorrect || twoAttemptsFailed) {
                    if (currentCase < cases.length - 1) {
                        setCurrentCase(currentCase + 1);
                        setSelectedImage(null);
                        setShowFeedback(false);
                    } else {
                        goToStage(3);
                    }
                } else {
                    setSelectedImage(null);
                    setShowFeedback(false);
                }
            };

            const c = cases[currentCase];

            return (
                <div className="bg-white rounded-3xl shadow-2xl p-8 md:p-12 fade-in">
                    <div className="text-center mb-8">
                        <div className="text-6xl mb-4">{c.emoji}</div>
                        <div className="inline-block bg-purple-100 text-purple-800 px-4 py-2 rounded-full font-bold mb-4">ì‚¬ë¡€ {currentCase + 1} / {cases.length}</div>
                        <h2 className="text-3xl font-bold text-gray-800 mb-4">{c.title}</h2>
                    </div>
                    {/* ë¬¸ì œ ì„¤ëª… ë¬¸êµ¬ ì¶”ê°€ ìœ„ì¹˜ */}
                    <div className="bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-6 mb-8 border-2 border-purple-200">
                        <p className="text-2xl font-bold text-center text-purple-700">{c.question}</p>
                    </div>

                    {!showFeedback ? (
                        <div className="grid md:grid-cols-2 gap-8 mb-8">
                            {c.images.map(img => (
                                <div key={img.id} onClick={() => handleSelect(img)} className="cursor-pointer bg-gradient-to-br from-gray-50 to-gray-100 p-8 rounded-3xl border-4 border-gray-200 hover:border-purple-400 transition-all hover:shadow-2xl hover:scale-105">
                                    <div className="text-center mb-6">
                                        <div className="inline-block bg-purple-100 px-4 py-2 rounded-full font-bold text-purple-700 mb-4">ì´ë¯¸ì§€ {img.id}</div>
                                    </div>
                                    <div className="text-7xl mb-6 text-center leading-tight">{img.visual}</div>
                                    <p className="text-center text-gray-600 text-base font-medium">{img.detail}</p>
                                </div>
                            ))}
                        </div>
                    ) : (
                        <div className={`rounded-3xl p-8 mb-8 fade-in border-4 ${selectedImage.biased ? 'bg-orange-50 border-orange-300 shake' : 'bg-green-50 border-green-300'}`}>
                            <div className="flex items-start mb-6">
                                <div className="text-6xl mr-6">{selectedImage.biased ? (attempts[c.id] >= 2 ? 'ğŸ˜¢' : 'ğŸ¤”') : 'ğŸ‰'}</div>
                                <div className="flex-1">
                                    <h3 className={`text-3xl font-bold mb-4 ${selectedImage.biased ? 'text-orange-800' : 'text-green-800'}`}>
                                        {selectedImage.biased ? (attempts[c.id] >= 2 ? 'ì•„ì‰¬ì›Œìš”!' : selectedImage.feedback.title) : selectedImage.feedback.title}
                                    </h3>
                                    <p className="text-xl font-bold mb-4">{selectedImage.feedback.reason}</p>
                                    <p className="text-lg mb-6">{selectedImage.feedback.explanation}</p>
                                    {selectedImage.biased && attempts[c.id] >= 2 && (
                                        <div className="bg-white rounded-2xl p-5 mt-4">
                                            <p className="font-bold">ğŸ’¡ 2ë²ˆì˜ ê¸°íšŒë¥¼ ëª¨ë‘ ì‚¬ìš©í–ˆì–´ìš”.</p>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    )}
                    <div className="flex gap-4">
                        {currentCase > 0 && (
                            <button onClick={() => { setCurrentCase(currentCase - 1); setSelectedImage(null); setShowFeedback(false); }} className="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-4 px-6 rounded-2xl transition-all">â† ì´ì „ ì‚¬ë¡€</button>
                        )}
                        {showFeedback && (
                            <button onClick={handleNext} className="flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xl font-bold py-5 px-8 rounded-2xl hover:shadow-2xl transform hover:scale-105 transition-all">
                                {!selectedImage.biased ? (currentCase < cases.length - 1 ? 'ë‹¤ìŒ ì‚¬ë¡€ â†’' : 'í•µì‹¬ ì •ë¦¬í•˜ê¸° ğŸ¯')
                                : (attempts[c.id] >= 2 ? (currentCase < cases.length - 1 ? 'ë‹¤ìŒ ì‚¬ë¡€ â†’' : 'í•µì‹¬ ì •ë¦¬í•˜ê¸° ğŸ¯') : 'ë‹¤ì‹œ ë„ì „í•˜ê¸° ğŸ”„')}
                            </button>
                        )}
                    </div>
                </div>
            );
        }

        function Stage3({ goToStage, updateScore, completedStages, setCompletedStages }) {
            const [selected, setSelected] = useState({});
            const [attempts, setAttempts] = useState({});

            const questions = [
                { id: 1, text: "AIê°€ ê³µì •í•˜ë ¤ë©´", explanation: "AIê°€ ê³µì •í•˜ë ¤ë©´ ë‹¤ì–‘í•œ ë°ì´í„°ë¥¼ ê· í˜•ìˆê²Œ í•™ìŠµí•´ì•¼ í•´ìš”.",
                  options: [
                    { id: 'a', text: "ë‹¤ì–‘í•œ ë°ì´í„°ë¥¼ ê· í˜•ìˆê²Œ í•™ìŠµí•´ì•¼ í•œë‹¤", correct: true },
                    { id: 'b', text: "ë§ì€ ì‚¬ëŒë“¤ì´ ì¢‹ì•„í•˜ëŠ” ê²°ê³¼ë§Œ ë§Œë“¤ì–´ì•¼ í•œë‹¤", correct: false },
                    { id: 'c', text: "ìµœëŒ€í•œ ë¹ ë¥´ê²Œ ë‹µë³€ì„ ìƒì„±í•´ì•¼ í•œë‹¤", correct: false },
                    { id: 'd', text: "ê°œë°œìì˜ ì˜ê²¬ë§Œ ë°˜ì˜í•´ì•¼ í•œë‹¤", correct: false }
                  ]},
                { id: 2, text: "AI í¸í–¥ì´ ìƒê¸°ëŠ” ì£¼ëœ ì´ìœ ëŠ”", explanation: "AI í¸í–¥ì€ í•™ìŠµ ë°ì´í„°ê°€ íŠ¹ì • ì§‘ë‹¨ì— í¸ì¤‘ë˜ì–´ ìˆì„ ë•Œ ë°œìƒí•´ìš”.",
                  options: [
                    { id: 'a', text: "AIê°€ ì¼ë¶€ëŸ¬ ì°¨ë³„í•˜ë ¤ê³  í•´ì„œì´ë‹¤", correct: false },
                    { id: 'b', text: "í•™ìŠµ ë°ì´í„°ê°€ íŠ¹ì • ì§‘ë‹¨ì— í¸ì¤‘ë˜ì–´ ìˆì–´ì„œì´ë‹¤", correct: true },
                    { id: 'c', text: "AIê°€ ë„ˆë¬´ ë³µì¡í•œ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•´ì„œì´ë‹¤", correct: false },
                    { id: 'd', text: "AIì˜ ì²˜ë¦¬ ì†ë„ê°€ ëŠë ¤ì„œì´ë‹¤", correct: false }
                  ]},
                { id: 3, text: "í¸í–¥ëœ AIë¥¼ ë°œê²¬í–ˆì„ ë•Œ ìš°ë¦¬ê°€ ì·¨í•´ì•¼ í•  íƒœë„ëŠ”", explanation: "í¸í–¥ì„ ì¸ì‹í•˜ê³  ë¹„íŒì ìœ¼ë¡œ ì‚¬ê³ í•´ì•¼ í•´ìš”.",
                  options: [
                    { id: 'a', text: "AIì˜ ê²°ê³¼ë¥¼ ë¬´ì¡°ê±´ ë¯¿ê³  ë”°ë¼ì•¼ í•œë‹¤", correct: false },
                    { id: 'b', text: "í¸í–¥ì„ ì¸ì‹í•˜ê³  ë¹„íŒì ìœ¼ë¡œ ì‚¬ê³ í•´ì•¼ í•œë‹¤", correct: true },
                    { id: 'c', text: "AI ì‚¬ìš©ì„ ì „ë©´ ê¸ˆì§€í•´ì•¼ í•œë‹¤", correct: false },
                    { id: 'd', text: "ì•„ë¬´ ì¡°ì¹˜ë„ ì·¨í•˜ì§€ ì•Šê³  ë¬´ì‹œí•´ì•¼ í•œë‹¤", correct: false }
                  ]},
                { id: 4, text: "ê³µì •í•œ AIë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€", explanation: "ë‹¤ì–‘í•œ ì§‘ë‹¨ì˜ ë°ì´í„°ë¥¼ ê· í˜•ìˆê²Œ ìˆ˜ì§‘í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•´ìš”.",
                  options: [
                    { id: 'a', text: "AI ê°œë°œ ì†ë„ë¥¼ ë†’ì´ëŠ” ê²ƒì´ë‹¤", correct: false },
                    { id: 'b', text: "ìµœì‹  ê¸°ìˆ ë§Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤", correct: false },
                    { id: 'c', text: "ë‹¤ì–‘í•œ ì§‘ë‹¨ì˜ ë°ì´í„°ë¥¼ ê· í˜•ìˆê²Œ ìˆ˜ì§‘í•˜ëŠ” ê²ƒì´ë‹¤", correct: true },
                    { id: 'd', text: "AIë¥¼ ê°€ëŠ¥í•œ í•œ ì ê²Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤", correct: false }
                  ]}
            ];

            const handleChoice = (qId, opt) => {
                setSelected(prev => ({ ...prev, [qId]: opt }));
                const currentAttempts = (attempts[qId] || 0) + 1;
                setAttempts(prev => ({ ...prev, [qId]: currentAttempts }));
                
                if (opt.correct) {
                    let points = 10;
                    if (currentAttempts === 2) points = 7;
                    updateScore('stage3', points);
                    setCompletedStages(prev => ({
                        ...prev, stage3: { ...prev.stage3, [qId]: true }
                    }));
                } else if (currentAttempts >= 2) {
                    setCompletedStages(prev => ({
                        ...prev, stage3: { ...prev.stage3, [qId]: true }
                    }));
                }
            };

            const allDone = Object.keys(completedStages.stage3).length === questions.length;

            return (
                <div className="bg-white rounded-3xl shadow-2xl p-8 md:p-12 fade-in">
                    <div className="text-center mb-8">
                        <div className="text-6xl mb-6">ğŸ¯</div>
                        <h2 className="text-3xl font-bold text-gray-800 mb-4">í•µì‹¬ ë‚´ìš© ì •ë¦¬í•˜ê¸°</h2>
                        <p className="text-lg text-gray-600">ë¬¸ì¥ì„ ì™„ì„±í•´ë³´ì„¸ìš”!</p>
                        <div className="mt-4 inline-block bg-purple-100 text-purple-800 px-6 py-2 rounded-full font-bold">
                            ì™„ë£Œ: {Object.keys(completedStages.stage3).length} / {questions.length}
                        </div>
                    </div>
                    <div className="space-y-6 mb-8">
                        {questions.map(q => (
                            <div key={q.id} className="bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-6 border-2 border-purple-200">
                                <h3 className="text-xl font-bold text-gray-800 mb-4 flex items-start">
                                    <span className="text-2xl mr-3">{q.id}.</span>
                                    <span>"{q.text}..."</span>
                                    {completedStages.stage3[q.id] && <span className="ml-auto text-green-600 text-2xl">âœ“</span>}
                                </h3>
                                {selected[q.id] && !selected[q.id].correct && !completedStages.stage3[q.id] && (
                                    <div className="mb-3 bg-orange-100 border-2 border-orange-300 rounded-lg p-3 text-orange-800">
                                        <span className="font-bold">âŒ í‹€ë ¸ì–´ìš”!</span> {attempts[q.id] >= 2 ? '2ë²ˆì˜ ê¸°íšŒë¥¼ ëª¨ë‘ ì‚¬ìš©í–ˆì–´ìš”.' : 'ë‹¤ì‹œ ì„ íƒí•´ì£¼ì„¸ìš”.'}
                                    </div>
                                )}
                                {completedStages.stage3[q.id] && (
                                    <div className={`mb-3 rounded-lg p-4 border-2 ${selected[q.id]?.correct ? 'bg-green-50 border-green-300' : 'bg-orange-50 border-orange-300'}`}>
                                        <div className="flex items-start mb-2">
                                            <span className="text-2xl mr-2">{selected[q.id]?.correct ? 'ğŸ‰' : 'ğŸ˜¢'}</span>
                                            <span className={`font-bold text-lg ${selected[q.id]?.correct ? 'text-green-800' : 'text-orange-800'}`}>
                                                {selected[q.id]?.correct ? 'ì •ë‹µì…ë‹ˆë‹¤!' : 'ì•„ì‰¬ì›Œìš”!'}
                                            </span>
                                        </div>
                                        <p className="text-gray-700">{q.explanation}</p>
                                    </div>
                                )}
                                <div className="space-y-3 ml-8">
                                    {q.options.map(opt => {
                                        const isSelected = selected[q.id]?.id === opt.id;
                                        const isDone = completedStages.stage3[q.id];
                                        const isWrong = isSelected && !opt.correct;
                                        return (
                                            <button key={opt.id} onClick={() => !isDone && handleChoice(q.id, opt)} disabled={isDone}
                                                className={`w-full text-left p-4 rounded-xl border-2 transition-all ${
                                                    isSelected && isDone ? (opt.correct ? 'border-green-500 bg-green-100' : 'border-red-500 bg-red-100')
                                                    : isWrong ? 'border-red-500 bg-red-100'
                                                    : isSelected ? 'border-purple-500 bg-purple-100'
                                                    : 'border-gray-300 bg-white hover:border-purple-300 hover:bg-purple-50'
                                                } ${isDone ? 'cursor-not-allowed' : 'cursor-pointer'}`}>
                                                <div className="flex items-start">
                                                    <div className={`w-6 h-6 rounded-full border-2 mr-3 flex items-center justify-center ${
                                                        isSelected && isDone ? (opt.correct ? 'border-green-500 bg-green-500' : 'border-red-500 bg-red-500')
                                                        : isWrong ? 'border-red-500 bg-red-500'
                                                        : isSelected ? 'border-purple-500 bg-purple-500'
                                                        : 'border-gray-400'
                                                    }`}>
                                                        {isSelected && <span className="text-white text-sm">{isDone ? (opt.correct ? 'âœ“' : 'âœ—') : 'âœ“'}</span>}
                                                    </div>
                                                    <span className="text-gray-700 text-lg flex-1">{opt.text}</span>
                                                </div>
                                            </button>
                                        );
                                    })}
                                </div>
                            </div>
                        ))}
                    </div>
                    {allDone ? (
                        <button onClick={() => goToStage(4)} className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xl font-bold py-5 px-8 rounded-2xl hover:shadow-2xl transform hover:scale-105 transition-all">
                            ê²°ê³¼ í™•ì¸ ë° ì¸ì¦ì„œ ë°›ê¸°! ğŸ‰
                        </button>
                    ) : (
                        <div className="text-center text-gray-600">â¬†ï¸ ìœ„ì˜ ë¬¸ì¥ë“¤ì„ ì™„ì„±í•´ì£¼ì„¸ìš”! (2ë²ˆê¹Œì§€ ë„ì „í•  ìˆ˜ ìˆì–´ìš”)</div>
                    )}
                </div>
            );
        }

        function Stage4({ totalScore, scores, setAllStagesCompleted }) {
            const [checkedItems, setCheckedItems] = useState({});
            const certRef = useRef(null);

            const keyLearnings = [
                { id: 1, title: 'ê³µì •í•¨ì˜ ì˜ë¯¸', desc: 'ëª¨ë“  ì‚¬ëŒì—ê²Œ ë™ë“±í•œ ê¸°íšŒë¥¼ ì£¼ê³  íŠ¹ì • ì§‘ë‹¨ì„ ì°¨ë³„í•˜ì§€ ì•ŠëŠ” ê²ƒ' },
                { id: 2, title: 'AI í¸í–¥ì˜ ì›ì¸', desc: 'í•™ìŠµ ë°ì´í„°ê°€ íŠ¹ì • ì§‘ë‹¨ì— í¸ì¤‘ë˜ì–´ ìˆì„ ë•Œ ë°œìƒí•¨' },
                { id: 3, title: 'í•´ê²° ë°©ë²•', desc: 'ë‹¤ì–‘í•œ ë°ì´í„°ë¥¼ ê· í˜•ìˆê²Œ ìˆ˜ì§‘í•˜ê³  í•™ìŠµì‹œì¼œì•¼ í•¨' },
                { id: 4, title: 'ìš°ë¦¬ì˜ ì—­í• ', desc: 'AI ê²°ê³¼ë¥¼ ë¹„íŒì ìœ¼ë¡œ ë°”ë¼ë³´ê³  í¸í–¥ì„ ì¸ì‹í•´ì•¼ í•¨' }
            ];

            const handleCheckItem = (id) => {
                setCheckedItems(prev => ({ ...prev, [id]: !prev[id] }));
            };

            const allChecked = Object.keys(checkedItems).length === keyLearnings.length && Object.values(checkedItems).every(v => v);

            useEffect(() => {
                if (allChecked) { setAllStagesCompleted(true); }
            }, [allChecked, setAllStagesCompleted]);

            let level = '', emoji = '', rank = '', comment = '';
            if (totalScore >= 110) { level = 'ì…œë¡ í™ˆì¦ˆê¸‰'; emoji = 'ğŸ©'; rank = 'MASTER'; comment = 'ë§ˆìŠ¤í„° íƒì •!'; }
            else if (totalScore >= 80) { level = 'ëª…íƒì •ê¸‰'; emoji = 'ğŸ§'; rank = 'EXPERT'; comment = 'ìˆ™ë ¨ íƒì •!'; }
            else { level = 'ì‹ ì°¸ íƒì •ê¸‰'; emoji = 'ğŸ”'; rank = 'ROOKIE'; comment = 'ê²¬ìŠµ íƒì •!'; }

            const downloadCert = () => {
                html2canvas(certRef.current, { scale: 2, backgroundColor: '#ffffff' }).then(canvas => {
                    const link = document.createElement('a');
                    link.download = 'AIí¸í–¥íƒì •ë‹¨_ì¸ì¦ì„œ.png';
                    link.href = canvas.toDataURL();
                    link.click();
                });
            };

            return (
                <div className="bg-white rounded-3xl shadow-2xl p-8 md:p-12 fade-in">
                    <div className="text-center mb-8">
                        <div className="text-7xl mb-6 bounce">ğŸ†</div>
                        <h2 className="text-4xl font-bold text-gray-800 mb-6">íƒì • í™œë™ ì™„ë£Œ!</h2>
                    </div>
                    <div className="bg-gradient-to-br from-blue-50 to-cyan-50 rounded-3xl p-8 text-left border-2 border-blue-200 mb-6">
                        <h3 className="text-2xl font-bold text-blue-800 mb-4 text-center">ğŸ“š ì˜¤ëŠ˜ ë°°ìš´ í•µì‹¬ ë‚´ìš©</h3>
                        <p className="text-center text-gray-600 mb-6">ê° í•­ëª©ì„ í™•ì¸í•˜ë©° ì²´í¬í•´ë³´ì„¸ìš”!</p>
                        <div className="space-y-4">
                            {keyLearnings.map(item => (
                                <div key={item.id} onClick={() => handleCheckItem(item.id)}
                                    className={`bg-white rounded-xl p-5 flex items-start cursor-pointer transition-all duration-300 border-2 ${
                                        checkedItems[item.id] ? 'bg-green-50 border-green-300' : 'border-gray-200 hover:border-blue-300'
                                    }`}>
                                    <div className={`w-8 h-8 rounded-lg border-2 mr-4 flex items-center justify-center flex-shrink-0 transition-all ${
                                        checkedItems[item.id] ? 'bg-green-500 border-green-500' : 'bg-white border-gray-400'
                                    }`}>
                                        {checkedItems[item.id] && <span className="text-white text-xl font-bold">âœ“</span>}
                                    </div>
                                    <div className="flex-1">
                                        <h4 className="font-bold text-lg text-gray-800 mb-1">{item.title}</h4>
                                        <p className="text-gray-700">{item.desc}</p>
                                    </div>
                                </div>
                            ))}
                        </div>
                        {allChecked && (
                            <div className="mt-6 bg-green-100 border-2 border-green-400 rounded-xl p-4 text-center fade-in">
                                <p className="text-green-800 font-bold text-lg">ğŸ‰ ëª¨ë“  í•µì‹¬ ë‚´ìš©ì„ í™•ì¸í–ˆì–´ìš”!</p>
                            </div>
                        )}
                    </div>
                    <div ref={certRef} className="bg-gradient-to-br from-purple-50 via-white to-pink-50 rounded-3xl p-10 mb-8 border-4 border-purple-300 shadow-2xl">
                        <div className="text-6xl mb-4">{emoji}</div>
                        <h3 className="text-3xl font-bold text-purple-800 mb-4">AI í¸í–¥ íƒì •ë‹¨ ì¸ì¦ì„œ</h3>
                        <div className="bg-white bg-opacity-60 rounded-2xl p-8">
                            <p className="text-gray-700 text-lg mb-6">ì´ ì¸ì¦ì„œëŠ” ë‹¤ìŒ ì‚¬ëŒì´</p>
                            <div className="bg-yellow-100 border-2 border-yellow-400 rounded-xl p-4 mb-6">
                                <input type="text" placeholder="ì—¬ê¸°ì— ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" className="text-2xl font-bold text-center w-full bg-transparent border-none outline-none" />
                            </div>
                            <p className="text-gray-700 text-lg mb-4">AI í¸í–¥ì— ëŒ€í•œ ì´í•´ì™€ ë¹„íŒì  ì‚¬ê³  ëŠ¥ë ¥ì„<br/>ì„±ê³µì ìœ¼ë¡œ í•¨ì–‘í–ˆìŒì„ ì¦ëª…í•©ë‹ˆë‹¤.</p>
                            <div className="grid grid-cols-3 gap-4 my-6 text-sm">
                                {[
                                    { title: '1ë‹¨ê³„', score: scores.stage1, max: STAGE1_MAX },
                                    { title: '2ë‹¨ê³„', score: scores.stage2, max: STAGE2_MAX },
                                    { title: '3ë‹¨ê³„', score: scores.stage3, max: STAGE3_MAX }
                                ].map((s, i) => (
                                    <div key={i} className="bg-purple-50 rounded-lg p-3">
                                        <div className="font-bold text-purple-800 mb-1">{s.title}</div>
                                        <div className="text-2xl font-bold text-purple-600">{s.score}</div>
                                        <div className="text-xs text-gray-600">/ {s.max}ì </div>
                                    </div>
                                ))}
                            </div>
                            <div className="bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl p-6 mb-4">
                                <div className="text-sm text-gray-600 mb-2">ìµœì¢… ì ìˆ˜</div>
                                <div className="text-5xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">{totalScore}ì </div>
                                <div className="text-sm text-gray-600 mt-1">/ {MAX_SCORE}ì </div>
                            </div>
                            <div className="bg-yellow-50 border-2 border-yellow-300 rounded-xl p-4">
                                <div className="text-sm text-yellow-800 mb-1">íƒì • ë ˆë²¨</div>
                                <div className="text-3xl font-bold text-yellow-700 mb-1">{level}</div>
                                <div className="inline-block bg-yellow-200 px-3 py-1 rounded-full text-xs font-bold text-yellow-800 mb-2">{rank}</div>
                                <div className="text-sm text-yellow-700">{comment}</div>
                            </div>
                        </div>
                        <p className="text-gray-500 text-sm mt-4">{new Date().toLocaleDateString('ko-KR')}</p>
                    </div>
                    <div className="bg-gradient-to-r from-amber-50 to-yellow-50 rounded-2xl p-6 mb-6 border-2 border-amber-200">
                        <h3 className="text-xl font-bold text-amber-800 mb-4">ğŸ… íƒì • ë ˆë²¨ ê¸°ì¤€</h3>
                        <div className="grid md:grid-cols-3 gap-4 text-left">
                            {[
                                { e: 'ğŸ©', n: 'ì…œë¡ í™ˆì¦ˆê¸‰', r: 'MASTER', s: '110ì  ì´ìƒ', h: totalScore >= 110 },
                                { e: 'ğŸ§', n: 'ëª…íƒì •ê¸‰', r: 'EXPERT', s: '80-109ì ', h: totalScore >= 80 && totalScore < 110 },
                                { e: 'ğŸ”', n: 'ì‹ ì°¸ íƒì •ê¸‰', r: 'ROOKIE', s: '79ì  ì´í•˜', h: totalScore < 80 }
                            ].map((l, i) => (
                                <div key={i} className={`bg-white rounded-xl p-4 border-2 ${l.h ? 'border-amber-400 shadow-lg' : 'border-gray-200'}`}>
                                    <div className="text-3xl mb-2">{l.e}</div>
                                    <div className="font-bold text-gray-800 mb-1">{l.n}</div>
                                    <div className="text-sm font-bold mb-2" style={{color: i === 0 ? '#d97706' : i === 1 ? '#2563eb' : '#16a34a'}}>{l.r}</div>
                                    <div className="text-xs text-gray-600">{l.s}</div>
                                </div>
                            ))}
                        </div>
                    </div>
                    <button onClick={downloadCert} className="w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white text-xl font-bold py-5 px-8 rounded-2xl hover:shadow-2xl transform hover:scale-105 transition-all">
                        ğŸ“¥ ì¸ì¦ì„œ ë‹¤ìš´ë¡œë“œí•˜ê¸°
                    </button>
                </div>
            );
        }

        ReactDOM.createRoot(document.getElementById('root')).render(<AIBiasDetective />);
    </script>
</body>
</html>