<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI í¸í–¥ íƒì •ë‹¨</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .bounce { animation: bounce 0.5s ease; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .shake { animation: shake 0.5s ease; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px); } 75% { transform: translateX(10px); } }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useRef, useEffect } = React;
        
        const MAX_SCORE = 300; 
        const STAGE1_MAX = 50; 
        const STAGE2_MAX = 150;
        const STAGE3_MAX = 100;

        function AIBiasDetective() {
            const [stage, setStage] = useState(0);
            const [scores, setScores] = useState({ stage1: 0, stage2: 0, stage3: 0 });
            const [completedStages, setCompletedStages] = useState({
                stage1: {}, stage2: {}, stage3: {}
            });
            const [allStagesCompleted, setAllStagesCompleted] = useState(false);
            const totalScore = scores.stage1 + scores.stage2 + scores.stage3;
            
            // ìˆ˜ì •ëœ ì ìˆ˜ ì—…ë°ì´íŠ¸ ë¡œì§: ì´ë¯¸ í‘¼ ë¬¸ì œëŠ” ë¬´ì¡°ê±´ ì ìˆ˜ ë°˜ì˜ ì•ˆ í•¨
            const updateScore = (stageKey, points, qId) => {
                setCompletedStages(prev => {
                    if (prev[stageKey] && prev[stageKey][qId] !== undefined) return prev; 
                    
                    setScores(sPrev => ({ ...sPrev, [stageKey]: sPrev[stageKey] + points }));
                    return {
                        ...prev,
                        [stageKey]: { ...prev[stageKey], [qId]: true }
                    };
                });
            };
            
            const goToStage = (stageNum) => setStage(stageNum);

            const stages = [
                { component: IntroStage },
                { component: Stage1 },
                { component: Stage2 },
                { component: Stage3 },
                { component: Stage4 }
            ];
            const CurrentComponent = stages[stage].component;

            const stage1Done = Object.keys(completedStages.stage1).length === 5;
            const stage2Done = Object.keys(completedStages.stage2).length === 10;
            const stage3Done = Object.keys(completedStages.stage3).length === 10;

            return (
                <div className="min-h-screen py-8 px-4">
                    <div className="max-w-5xl mx-auto">
                        <div className="text-center mb-6 fade-in">
                            <h1 className="text-4xl md:text-5xl font-bold text-white mb-4">ğŸ•µï¸ AI í¸í–¥ íƒì •ë‹¨</h1>
                            <p className="text-xl text-white opacity-90">ê³µì •í•œ AIë¥¼ ì°¾ì•„ë¼!</p>
                        </div>
                        {stage > 0 && (
                            <div className="mb-6 no-print">
                                <div className="bg-white bg-opacity-20 rounded-2xl p-4 backdrop-blur-sm mb-4">
                                    <div className="flex justify-between items-center">
                                        <div className="text-white font-bold text-lg">
                                            ğŸ† ëˆ„ì  ì ìˆ˜: <span className="text-yellow-300 text-2xl">{totalScore}</span> / {MAX_SCORE}ì 
                                        </div>
                                        <div className="text-white font-bold text-lg">ğŸ“ {stage}/4 ë‹¨ê³„</div>
                                    </div>
                                </div>
                                <div className="bg-white bg-opacity-20 rounded-2xl p-4 backdrop-blur-sm">
                                    <div className="flex justify-around items-center">
                                        {['ê³µì •í•¨ ì´í•´', 'AI í¸í–¥ ì°¾ê¸°', 'í•µì‹¬ ì •ë¦¬', 'ê²°ê³¼ í™•ì¸'].map((title, idx) => {
                                            const stageNum = idx + 1;
                                            const isCurrentStage = stageNum === stage;
                                            const isCompleted = (stageNum === 1 && stage1Done) || (stageNum === 2 && stage2Done) || (stageNum === 3 && stage3Done) || (stageNum === 4 && allStagesCompleted);
                                            
                                            // ìˆ˜ì •ëœ ë„¤ë¹„ê²Œì´ì…˜ ë¡œì§: ì™„ë£Œí–ˆê±°ë‚˜, í˜„ì¬ ë‹¨ê³„ë³´ë‹¤ ì´ì „ì´ê±°ë‚˜, ìµœì¢… ì™„ë£Œ ìƒíƒœë©´ ìƒì‹œ ì ‘ê·¼ ê°€ëŠ¥
                                            const canAccess = allStagesCompleted || stageNum <= stage || isCompleted;
                                            
                                            return (
                                                <button key={idx} onClick={() => goToStage(stageNum)}
                                                    disabled={!canAccess}
                                                    className={`flex flex-col items-center px-3 py-2 rounded-xl transition-all duration-300 ${
                                                        isCurrentStage ? 'bg-purple-500 text-white scale-110'
                                                        : canAccess ? 'bg-lime-400 text-white hover:scale-105'
                                                        : 'bg-white bg-opacity-30 text-white opacity-50 cursor-not-allowed'
                                                    }`}>
                                                    <div className="text-xl mb-1">
                                                        {isCompleted ? 'âœ“' : isCurrentStage ? 'â–¶' : stageNum}
                                                    </div>
                                                    <div className="text-xs font-bold">{title}</div>
                                                </button>
                                            );
                                        })}
                                    </div>
                                </div>
                            </div>
                        )}
                        <CurrentComponent
                            goToStage={goToStage} updateScore={updateScore} scores={scores} totalScore={totalScore}
                            completedStages={completedStages} setCompletedStages={setCompletedStages}
                            setAllStagesCompleted={setAllStagesCompleted}
                        />
                    </div>
                </div>
            );
        }

        function IntroStage({ goToStage }) {
            return (
                <div className="bg-white rounded-3xl shadow-2xl p-8 md:p-12 fade-in">
                    <div className="text-center mb-8">
                        <div className="text-6xl mb-6 bounce">ğŸ¯</div>
                        <h2 className="text-3xl font-bold text-gray-800 mb-4">AI í¸í–¥ íƒì •ì´ ë˜ì–´ë³¼ê¹Œìš”?</h2>
                        <p className="text-lg text-gray-600 leading-relaxed mb-6">
                            ìš°ë¦¬ ì£¼ë³€ì˜ AIëŠ” ì •ë§ ê³µì •í• ê¹Œìš”?<br/>í•¨ê»˜ AIì˜ í¸í–¥ì„ ì°¾ì•„ë‚´ëŠ” íƒì •ì´ ë˜ì–´ë´…ì‹œë‹¤!
                        </p>
                    </div>
                    <div className="bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-8 mb-8 border-2 border-purple-200">
                        <h3 className="text-2xl font-bold text-purple-800 mb-6 text-center">ğŸ® íƒì • í™œë™ ë¯¸ì…˜</h3>
                        <div className="space-y-4">
                            {[
                                { icon: '1ï¸âƒ£', title: 'ê³µì •í•¨ ì´í•´í•˜ê¸° (50ì )', desc: 'O/X í€´ì¦ˆë¡œ ê³µì •í•¨ì˜ ì˜ë¯¸ë¥¼ ë°°ì›Œìš”' },
                                { icon: '2ï¸âƒ£', title: 'AI í¸í–¥ ì°¾ê¸° (150ì )', desc: '10ê°€ì§€ ì‚¬ë¡€ë¥¼ í†µí•´ í¸í–¥ì„ ì°¾ì•„ë‚´ìš”' },
                                { icon: '3ï¸âƒ£', title: 'í•µì‹¬ ì •ë¦¬ (100ì )', desc: 'ë°°ìš´ ë‚´ìš©ì„ í€´ì¦ˆë¡œ ì •ë¦¬í•´ìš”' },
                                { icon: '4ï¸âƒ£', title: 'ê²°ê³¼ í™•ì¸', desc: 'ì¸ì¦ì„œë¥¼ ë°›ì•„ìš”' }
                            ].map((item, i) => (
                                <div key={i} className="flex items-start bg-white bg-opacity-60 rounded-xl p-4">
                                    <span className="text-3xl mr-4">{item.icon}</span>
                                    <div>
                                        <h4 className="font-bold text-lg text-gray-800 mb-1">{item.title}</h4>
                                        <p className="text-gray-600">{item.desc}</p>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                    <button onClick={() => goToStage(1)} className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xl font-bold py-5 px-8 rounded-2xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300">
                        íƒì • í™œë™ ì‹œì‘í•˜ê¸°! ğŸš€
                    </button>
                </div>
            );
        }

        function Stage1({ goToStage, updateScore, completedStages }) {
            const [currentQ, setCurrentQ] = useState(0);
            const [showFeedback, setShowFeedback] = useState(false);
            const [selectedAnswer, setSelectedAnswer] = useState(null);

            const questions = [
                { id: 1, emoji: "ğŸ“", situation: "í•™êµì—ì„œ ìˆ˜í•™ ì„±ì ì´ ë†’ì€ í•™ìƒë“¤ì—ê²Œë§Œ\níŠ¹ë³„ í”„ë¡œê·¸ë¨ ì°¸ì—¬ ê¸°íšŒë¥¼ ì¤ë‹ˆë‹¤.", question: "ì´ê²ƒì€ ê³µì •í•œê°€ìš”?", correctAnswer: "O",
                  explanation: { O: "ì •ë‹µì´ì—ìš”! ëŠ¥ë ¥ì— ë”°ë¼ ë‹¤ë¥¸ ê¸°íšŒë¥¼ ì£¼ëŠ” ê²ƒì€ ê³µì •í•  ìˆ˜ ìˆì–´ìš”.", X: "ì•„ì‰¬ì›Œìš”. ì´ê±´ ê³µì •í•´ìš”! ì„±ì ì´ë¼ëŠ” ê°ê´€ì  ê¸°ì¤€ìœ¼ë¡œ ì„ ë°œí–ˆê¸° ë•Œë¬¸ì´ì—ìš”." }},
                { id: 2, emoji: "âš½", situation: "ì¶•êµ¬íŒ€ ì£¼ì¥ ì„ ê±°ì—ì„œ ë‚¨í•™ìƒë§Œ í›„ë³´ë¡œ\në“±ë¡í•  ìˆ˜ ìˆë‹¤ê³  í•©ë‹ˆë‹¤.", question: "ì´ê²ƒì€ ê³µì •í•œê°€ìš”?", correctAnswer: "X",
                  explanation: { O: "ì•„ì‰¬ì›Œìš”. ì´ê±´ ë¶ˆê³µì •í•´ìš”! ì„±ë³„ë¡œ ê¸°íšŒë¥¼ ì œí•œí•˜ëŠ” ê²ƒì€ ì°¨ë³„ì´ì—ìš”.", X: "ì •ë‹µì´ì—ìš”! ì„±ë³„ë¡œ ê¸°íšŒë¥¼ ì œí•œí•˜ëŠ” ê²ƒì€ ë¶ˆê³µì •í•´ìš”." }},
                { id: 3, emoji: "ğŸ¨", situation: "ë¯¸ìˆ  ëŒ€íšŒì—ì„œ ì‹¬ì‚¬ìœ„ì›ì´ ìì‹ ì´ ì¢‹ì•„í•˜ëŠ”\nìŠ¤íƒ€ì¼ì˜ ê·¸ë¦¼ì—ë§Œ ë†’ì€ ì ìˆ˜ë¥¼ ì¤ë‹ˆë‹¤.", question: "ì´ê²ƒì€ ê³µì •í•œê°€ìš”?", correctAnswer: "X",
                  explanation: { O: "ì•„ì‰¬ì›Œìš”. ì´ê±´ ë¶ˆê³µì •í•´ìš”! ê°œì¸ì ì¸ ì·¨í–¥ë§Œìœ¼ë¡œ í‰ê°€í•˜ë©´ ì•ˆ ë¼ìš”.", X: "ì •ë‹µì´ì—ìš”! ê°œì¸ ì·¨í–¥ë§Œìœ¼ë¡œ í‰ê°€í•˜ëŠ” ê²ƒì€ ë¶ˆê³µì •í•´ìš”." }},
                { id: 4, emoji: "ğŸ¦½", situation: "ì‹œí—˜ ì‹œê°„ì— ì¥ì• ê°€ ìˆëŠ” í•™ìƒì—ê²Œë§Œ\nì¶”ê°€ ì‹œê°„ì„ ë” ì¤ë‹ˆë‹¤.", question: "ì´ê²ƒì€ ê³µì •í•œê°€ìš”?", correctAnswer: "O",
                  explanation: { O: "ì •ë‹µì´ì—ìš”! ì¥ì• ë¡œ ì¸í•œ ë¶ˆë¦¬í•¨ì„ ë³´ì™„í•´ì£¼ëŠ” ê²ƒì€ 'í˜•í‰ì„±'ì´ì—ìš”.", X: "ì•„ì‰¬ì›Œìš”. ì¥ì• ë¡œ ì¸í•œ ë¶ˆë¦¬í•¨ì„ ë³´ì™„í•´ì£¼ëŠ” ê²ƒì€ ì§„ì •í•œ ê³µì •í•¨ì„ ìœ„í•´ í•„ìš”í•´ìš”." }},
                { id: 5, emoji: "ğŸ¥ª", situation: "ê¸‰ì‹ ì‹œê°„ì— ë°°ê°€ ë” ê³ í”ˆ ì‚¬ëŒì—ê²Œë§Œ\nìŒì‹ì„ í›¨ì”¬ ë” ë§ì´ ë‚˜ëˆ„ì–´ ì¤ë‹ˆë‹¤.", question: "ì´ê²ƒì€ ê³µì •í•œê°€ìš”?", correctAnswer: "X",
                  explanation: { O: "ì•„ì‰¬ì›Œìš”. ì£¼ê´€ì ì¸ ì´ìœ ë¡œ ë°°ë¶„ì„ ë‹¤ë¥´ê²Œ í•˜ëŠ” ê²ƒì€ ê·œì¹™ìƒ ë¶ˆê³µì •í•  ìˆ˜ ìˆì–´ìš”.", X: "ì •ë‹µì´ì—ìš”! ëª¨ë“  ì‚¬ëŒì—ê²Œ ì •í•´ì§„ ê·œì¹™ëŒ€ë¡œ ë°°ë¶„í•˜ëŠ” ê²ƒì´ ê¸°ë³¸ì…ë‹ˆë‹¤." }}
            ];

            const handleAnswer = (answer) => {
                setSelectedAnswer(answer);
                setShowFeedback(true);
                const isCorrect = answer === questions[currentQ].correctAnswer;
                
                if (isCorrect) {
                    updateScore('stage1', 10, questions[currentQ].id);
                } else {
                    updateScore('stage1', 0, questions[currentQ].id);
                }
            };

            const handleNext = () => {
                if (currentQ < questions.length - 1) {
                    setCurrentQ(currentQ + 1);
                    setShowFeedback(false);
                    setSelectedAnswer(null);
                } else {
                    goToStage(2);
                }
            };

            const q = questions[currentQ];
            const isCorrect = selectedAnswer === q.correctAnswer;

            return (
                <div className="bg-white rounded-3xl shadow-2xl p-8 md:p-12 fade-in">
                    <div className="text-center mb-8">
                        <div className="text-5xl mb-4">{q.emoji}</div>
                        <div className="inline-block bg-purple-100 text-purple-800 px-4 py-2 rounded-full font-bold mb-4">ë¬¸ì œ {currentQ + 1} / {questions.length}</div>
                        <h2 className="text-3xl font-bold text-gray-800 mb-4">ê³µì •í•¨ ì´í•´í•˜ê¸°</h2>
                    </div>
                    <div className="bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-8 mb-8 border-2 border-purple-200">
                        <p className="text-xl text-gray-800 leading-relaxed text-center whitespace-pre-line mb-6">{q.situation}</p>
                        <p className="text-2xl font-bold text-center text-purple-700">{q.question}</p>
                    </div>
                    {!showFeedback ? (
                        <div className="grid grid-cols-2 gap-6 mb-6">
                            <button onClick={() => handleAnswer('O')} className="bg-green-100 hover:bg-green-200 border-4 border-green-300 text-green-800 font-bold text-3xl py-12 rounded-2xl transform hover:scale-105 transition-all">
                                <div className="text-5xl mb-2">â­•</div>ê³µì •í•´ìš”
                            </button>
                            <button onClick={() => handleAnswer('X')} className="bg-red-100 hover:bg-red-200 border-4 border-red-300 text-red-800 font-bold text-3xl py-12 rounded-2xl transform hover:scale-105 transition-all">
                                <div className="text-5xl mb-2">âŒ</div>ë¶ˆê³µì •í•´ìš”
                            </button>
                        </div>
                    ) : (
                        <div className={`rounded-2xl p-6 mb-6 fade-in border-4 ${isCorrect ? 'bg-green-50 border-green-300' : 'bg-orange-50 border-orange-300 shake'}`}>
                            <div className="flex items-start mb-4">
                                <div className="text-5xl mr-4">{isCorrect ? 'ğŸ‰' : 'ğŸ˜¢'}</div>
                                <div className="flex-1">
                                    <h3 className={`text-2xl font-bold mb-3 ${isCorrect ? 'text-green-800' : 'text-orange-800'}`}>
                                        {isCorrect ? 'ì •ë‹µì…ë‹ˆë‹¤!' : 'í‹€ë ¸ìŠµë‹ˆë‹¤!'}
                                    </h3>
                                    <p className="text-lg text-gray-700 leading-relaxed">{q.explanation[selectedAnswer]}</p>
                                </div>
                            </div>
                        </div>
                    )}
                    <div className="flex justify-center">
                        {showFeedback && (
                            <button onClick={handleNext} className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xl font-bold py-4 px-8 rounded-2xl hover:shadow-2xl transform hover:scale-105 transition-all">
                                {currentQ < questions.length - 1 ? 'ë‹¤ìŒ ë¬¸ì œ â†’' : 'í¸í–¥ ì°¾ê¸° ì‹œì‘! ğŸ”'}
                            </button>
                        )}
                    </div>
                </div>
            );
        }

        function Stage2({ goToStage, updateScore, completedStages }) {
            const [currentCase, setCurrentCase] = useState(0);
            const [selectedImage, setSelectedImage] = useState(null);
            const [showFeedback, setShowFeedback] = useState(false);
            const [showHints, setShowHints] = useState(false);

            const cases = [
                { id: 1, title: "AIê°€ ê·¸ë¦° 'í”„ë¡œê·¸ë˜ë¨¸' ê·¸ë¦¼", emoji: "ğŸ’»", question: "í¸í–¥ì´ ì—†ëŠ” ê³µì •í•œ ê·¸ë¦¼ì€?",
                  images: [
                    { id: 'A', visual: 'ğŸ‘¨ğŸ»â€ğŸ’»ğŸ‘©ğŸ¾â€ğŸ’»ğŸ‘©ğŸ¼â€ğŸ’»', detail: 'í™©ì¸ ë‚¨ì„±, í‘ì¸ ì—¬ì„±, ë°±ì¸ ì—¬ì„±', biased: false,
                      feedback: { title: 'ê³µì •í•´ìš”! ğŸ‰', reason: 'ì„±ë³„ê³¼ ì¸ì¢…ì´ ë‹¤ì–‘í•´ìš”', explanation: 'í”„ë¡œê·¸ë˜ë¨¸ëŠ” ëˆ„êµ¬ë‚˜ ë  ìˆ˜ ìˆì–´ìš”.' }},
                    { id: 'B', visual: 'ğŸ‘¨ğŸ»â€ğŸ’»ğŸ‘¨ğŸ»â€ğŸ’»ğŸ‘¨ğŸ»â€ğŸ’»', detail: 'ì Šì€ ë‚¨ì„±, ì Šì€ ë‚¨ì„±, ì Šì€ ë‚¨ì„±', biased: true,
                      feedback: { title: 'í¸í–¥ì´ ìˆì–´ìš”! ğŸš¨', reason: 'í•œ ê°€ì§€ë§Œ í‘œí˜„ë˜ì—ˆì–´ìš”', explanation: 'ì—¬ì„± ê°œë°œìë„ ë§ì´ ìˆì–´ìš”.' }}
                  ]},
                { id: 2, title: "AIê°€ ê·¸ë¦° 'ê°„í˜¸ì‚¬' ê·¸ë¦¼", emoji: "ğŸ‘¨â€âš•ï¸", question: "í¸í–¥ì´ ì—†ëŠ” ê³µì •í•œ ê·¸ë¦¼ì€?",
                  images: [
                    { id: 'A', visual: 'ğŸ‘©ğŸ»â€âš•ï¸ğŸ‘©ğŸ½â€âš•ï¸ğŸ‘©ğŸ¼â€âš•ï¸', detail: 'í™©ì¸ ì—¬ì„±, í‘ì¸ ì—¬ì„±, ë°±ì¸ ì—¬ì„±', biased: true,
                      feedback: { title: 'í¸í–¥ì´ ìˆì–´ìš”! ğŸš¨', reason: 'í•œ ê°€ì§€ ì„±ë³„ë§Œ', explanation: 'ë‚¨ì ê°„í˜¸ì‚¬ë„ ë§ì•„ìš”.' }},
                    { id: 'B', visual: 'ğŸ‘¨ğŸ»â€âš•ï¸ğŸ‘©ğŸ½â€âš•ï¸ğŸ‘¨ğŸ¾â€âš•ï¸', detail: 'í™©ì¸ ë‚¨ì„±, í‘ì¸ ì—¬ì„±, í‘ì¸ ë‚¨ì„±', biased: false,
                      feedback: { title: 'ê³µì •í•´ìš”! ğŸŒŸ', reason: 'ë‹¤ì–‘í•˜ê²Œ í‘œí˜„í–ˆì–´ìš”', explanation: 'ê°„í˜¸ì‚¬ëŠ” ëˆ„êµ¬ë‚˜ ë  ìˆ˜ ìˆì–´ìš”.' }}
                  ]},
                { id: 3, title: "AIê°€ ê·¸ë¦° 'ê±´ì¶•ê°€' ê·¸ë¦¼", emoji: "ğŸ—ï¸", question: "í¸í–¥ì´ ì—†ëŠ” ê³µì •í•œ ê·¸ë¦¼ì€?",
                  images: [
                    { id: 'A', visual: 'ğŸ‘©ğŸ»ğŸ‘¨ğŸ½ğŸ‘´ğŸ¾', detail: 'ì Šì€ ì—¬ì„±, ì Šì€ ë‚¨ì„±, ì‹œë‹ˆì–´ ë‚¨ì„±', biased: false,
                      feedback: { title: 'ê³µì •í•´ìš”! ğŸ¯', reason: 'ë‹¤ì–‘í•˜ê²Œ í‘œí˜„í–ˆì–´ìš”', explanation: 'ê±´ì¶•ê°€ëŠ” ëˆ„êµ¬ë‚˜ ë  ìˆ˜ ìˆì–´ìš”.' }},
                    { id: 'B', visual: 'ğŸ‘´ğŸ»ğŸ‘´ğŸ»ğŸ‘´ğŸ»', detail: 'ì‹œë‹ˆì–´ ë‚¨ì„±, ì‹œë‹ˆì–´ ë‚¨ì„±, ì‹œë‹ˆì–´ ë‚¨ì„±', biased: true,
                      feedback: { title: 'í¸í–¥ì´ ìˆì–´ìš”! ğŸš¨', reason: 'íŠ¹ì • ë‚˜ì´ëŒ€ë§Œ', explanation: 'ì Šì€ ê±´ì¶•ê°€, ì—¬ì„± ê±´ì¶•ê°€ë„ ë§ì•„ìš”.' }}
                  ]},
                { id: 4, title: "AIê°€ ê·¸ë¦° 'ì„ ìƒë‹˜' ê·¸ë¦¼", emoji: "ğŸ‘¨â€ğŸ«", question: "í¸í–¥ì´ ì—†ëŠ” ê³µì •í•œ ê·¸ë¦¼ì€?",
                  images: [
                    { id: 'A', visual: 'ğŸ‘¨ğŸ»â€ğŸ«ğŸ‘©ğŸ»â€ğŸ«ğŸ‘¨ğŸ»â€ğŸ«', detail: 'ë°±ì¸ ë‚¨ì„±, ë°±ì¸ ì—¬ì„±, ë°±ì¸ ë‚¨ì„±', biased: true,
                      feedback: { title: 'í¸í–¥ì´ ìˆì–´ìš”! ğŸ¤”', reason: 'í•œ ê°€ì§€ ì¸ì¢…ë§Œ', explanation: 'ë‹¤ì–‘í•œ ì¸ì¢…ì˜ ì„ ìƒë‹˜ì´ ìˆì–´ìš”.' }},
                    { id: 'B', visual: 'ğŸ‘¨ğŸ»â€ğŸ«ğŸ‘©ğŸ½â€ğŸ«ğŸ‘¨ğŸ¾â€ğŸ«', detail: 'ë°±ì¸ ë‚¨ì„±, í‘ì¸ ì—¬ì„±, í‘ì¸ ë‚¨ì„±', biased: false,
                      feedback: { title: 'ê³µì •í•´ìš”! ğŸŒ', reason: 'ë‹¤ì–‘í•˜ê²Œ í‘œí˜„í–ˆì–´ìš”', explanation: 'ì„ ìƒë‹˜ì€ ëˆ„êµ¬ë‚˜ ë  ìˆ˜ ìˆì–´ìš”.' }}
                  ]},
                { id: 5, title: "AIê°€ ê·¸ë¦° 'CEO(ìµœê³ ê²½ì˜ì)'", emoji: "ğŸ‘”", question: "í¸í–¥ì´ ì—†ëŠ” ê³µì •í•œ ê·¸ë¦¼ì€?",
                  images: [
                    { id: 'A', visual: 'ğŸ‘´ğŸ»ğŸ‘´ğŸ¼ğŸ‘´ğŸ½', detail: 'ì¤‘ì¥ë…„ ë‚¨ì„±ë“¤', biased: true,
                      feedback: { title: 'í¸í–¥ì´ ìˆì–´ìš”! ğŸš¨', reason: 'ë‚˜ì´ì™€ ì„±ë³„ì˜ ê³ ì •ê´€ë…', explanation: 'CEOëŠ” ì Šì„ ìˆ˜ë„, ì—¬ì„±ì¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.' }},
                    { id: 'B', visual: 'ğŸ‘©ğŸ»ğŸ‘¨ğŸ½ğŸ‘©ğŸ¼', detail: 'ë™ì–‘ì¸ ì—¬ì„±, í‘ì¸ ë‚¨ì„±, ë°±ì¸ ì—¬ì„±', biased: false,
                      feedback: { title: 'ê³µì •í•´ìš”! âœ¨', reason: 'ì„±ë³„ê³¼ ì¸ì¢…ì˜ ì¡°í™”', explanation: 'ëˆ„êµ¬ë‚˜ ë¦¬ë”ê°€ ë  ìˆ˜ ìˆëŠ” ë‹¤ì–‘ì„±ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.' }}
                  ]},
                { id: 6, title: "AIê°€ ê·¸ë¦° 'ê°€ì‚¬ ë…¸ë™í•˜ëŠ” person'", emoji: "ğŸ§¹", question: "í¸í–¥ì´ ì—†ëŠ” ê³µì •í•œ ê·¸ë¦¼ì€?",
                  images: [
                    { id: 'A', visual: 'ğŸ‘©ğŸ»ğŸ‘©ğŸ¼ğŸ‘©ğŸ½', detail: 'ì—¬ëŸ¬ ì¸ì¢…ì˜ ì—¬ì„±ë“¤', biased: true,
                      feedback: { title: 'í¸í–¥ì´ ìˆì–´ìš”! ğŸš¨', reason: 'ì„±ë³„ ê³ ì •ê´€ë…', explanation: 'ì§‘ì•ˆì¼ì€ ì—¬ì„±ë§Œ í•œë‹¤ëŠ” í¸ê²¬ì´ ë°˜ì˜ë˜ì—ˆìŠµë‹ˆë‹¤.' }},
                    { id: 'B', visual: 'ğŸ‘¨ğŸ»ğŸ‘©ğŸ½ğŸ‘¨ğŸ¾', detail: 'ì—¬ëŸ¬ ì¸ì¢…ì˜ ë‚¨ì„±ê³¼ ì—¬ì„±', biased: false,
                      feedback: { title: 'ê³µì •í•´ìš”! ğŸ ', reason: 'ì„±ë³„ ì—­í•  íƒˆí”¼', explanation: 'ê°€ì‚¬ ë…¸ë™ì€ ì„±ë³„ì— ê´€ê³„ì—†ì´ í•¨ê»˜ í•˜ëŠ” ì¼ì…ë‹ˆë‹¤.' }}
                  ]},
                { id: 7, title: "AIê°€ ê·¸ë¦° 'ê³¼í•™ì'", emoji: "ğŸ”¬", question: "í¸í–¥ì´ ì—†ëŠ” ê³µì •í•œ ê·¸ë¦¼ì€?",
                  images: [
                    { id: 'A', visual: 'ğŸ‘¨ğŸ»â€ğŸ”¬ğŸ‘©ğŸ¼â€ğŸ”¬ğŸ‘¨ğŸ¾â€ğŸ”¬', detail: 'ë‹¤ì–‘í•œ ì„±ë³„ê³¼ ì¸ì¢…', biased: false,
                      feedback: { title: 'ê³µì •í•´ìš”! ğŸ§ª', reason: 'ë‹¤ì–‘í•œ ì—°êµ¬ìë“¤', explanation: 'ì „ ì„¸ê³„ì˜ ë‹¤ì–‘í•œ ì‚¬ëŒë“¤ì´ ê³¼í•™ ë°œì „ì— ê¸°ì—¬í•©ë‹ˆë‹¤.' }},
                    { id: 'B', visual: 'ğŸ‘¨ğŸ»â€ğŸ”¬ğŸ‘¨ğŸ»â€ğŸ”¬ğŸ‘¨ğŸ¾â€ğŸ”¬', detail: 'ë‹¤ì–‘í•œ ì¸ì¢…', biased: true,
                      feedback: { title: 'í¸í–¥ì´ ìˆì–´ìš”! ğŸš¨', reason: 'ì´ë¯¸ì§€ì˜ ì •í˜•í™”', explanation: 'ê³¼í•™ìì— ëŒ€í•œ íŠ¹ì • ì„±ë³„ì˜ í¸ê²¬ì´ ë‹´ê²¼ìŠµë‹ˆë‹¤.' }}
                  ]},
                { id: 8, title: "AIê°€ ê·¸ë¦° 'ìœ¡ì•„í•˜ëŠ” ëª¨ìŠµ'", emoji: "ğŸ¼", question: "í¸í–¥ì´ ì—†ëŠ” ê³µì •í•œ ê·¸ë¦¼ì€?",
                  images: [
                    { id: 'A', visual: 'ğŸ‘©ğŸ»ğŸ‘©ğŸ»ğŸ‘©ğŸ»', detail: 'ì•„ì´ë¥¼ ëŒë³´ëŠ” ì—„ë§ˆë“¤', biased: true,
                      feedback: { title: 'í¸í–¥ì´ ìˆì–´ìš”! ğŸš¨', reason: 'ë¶€ëª¨ ì—­í• ì˜ í¸ì¤‘', explanation: 'ì•„ë¹ ë“¤ë„ ìœ¡ì•„ì— ì ê·¹ì ìœ¼ë¡œ ì°¸ì—¬í•©ë‹ˆë‹¤.' }},
                    { id: 'B', visual: 'ğŸ‘¨ğŸ»ğŸ‘©ğŸ¼ğŸ‘¨ğŸ¾', detail: 'ì•„ì´ë¥¼ ëŒë³´ëŠ” ì•„ë¹ ì™€ ì—„ë§ˆ', biased: false,
                      feedback: { title: 'ê³µì •í•´ìš”! â¤ï¸', reason: 'ê³µë™ ìœ¡ì•„ì˜ ëª¨ìŠµ', explanation: 'ìœ¡ì•„ì˜ ì£¼ì²´ëŠ” ì„±ë³„ì— êµ­í•œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.' }}
                  ]},
                { id: 9, title: "AIê°€ ê·¸ë¦° 'ìš´ë™ ì„ ìˆ˜'", emoji: "ğŸƒ", question: "í¸í–¥ì´ ì—†ëŠ” ê³µì •í•œ ê·¸ë¦¼ì€?",
                  images: [
                    { id: 'A', visual: 'ğŸƒâ€â™‚ï¸ğŸƒâ€â™€ï¸ğŸ‘©ğŸ¼â€ğŸ¦½', detail: 'ë‚¨ë…€ ì„ ìˆ˜ì™€ íœ ì²´ì–´ ì„ ìˆ˜', biased: false,
                      feedback: { title: 'ê³µì •í•´ìš”! ğŸ¥‡', reason: 'ì‹ ì²´ì  ì¡°ê±´ì˜ ë‹¤ì–‘ì„±', explanation: 'ì¥ì•  ìœ ë¬´ì™€ ê´€ê³„ì—†ì´ ëˆ„êµ¬ë‚˜ ìŠ¤í¬ì¸ ë¥¼ ì¦ê¹ë‹ˆë‹¤.' }},
                    { id: 'B', visual: 'ğŸƒâ€â™‚ï¸ğŸƒâ€â™‚ï¸ğŸƒâ€â™‚ï¸', detail: 'ê·¼ìœ¡ì§ˆì˜ ë‚¨ì„± ì„ ìˆ˜ë“¤', biased: true,
                      feedback: { title: 'í¸í–¥ì´ ìˆì–´ìš”! ğŸš¨', reason: 'ì‹ ì²´ ë° ì„±ë³„ í¸í–¥', explanation: 'ì—¬ì„± ì„ ìˆ˜ë‚˜ íŒŒë¼ ì„ ìˆ˜ì˜ ëª¨ìŠµì´ ë¹ ì ¸ìˆìŠµë‹ˆë‹¤.' }}
                  ]},
                { id: 10, title: "AIê°€ ê·¸ë¦° 'ì„¸ê³„ì˜ ì–´ë¦°ì´'", emoji: "ğŸ§’", question: "í¸í–¥ì´ ì—†ëŠ” ê³µì •í•œ ê·¸ë¦¼ì€?",
                  images: [
                    { id: 'A', visual: 'ğŸ‘§ğŸ¼ğŸ‘¦ğŸ¼ğŸ‘§ğŸ¼', detail: 'ê¸ˆë°œì˜ ë°±ì¸ ì•„ì´ë“¤', biased: true,
                      feedback: { title: 'í¸í–¥ì´ ìˆì–´ìš”! ğŸš¨', reason: 'íŠ¹ì • ì§€ì—­ í¸ì¤‘', explanation: 'ì§€êµ¬ì´Œì—ëŠ” í›¨ì”¬ ë” ë‹¤ì–‘í•œ ëª¨ìŠµì˜ ì•„ì´ë“¤ì´ ì‚´ê³  ìˆìŠµë‹ˆë‹¤.' }},
                    { id: 'B', visual: 'ğŸ‘§ğŸ»ğŸ‘¦ğŸ¾ğŸ‘§ğŸ¼', detail: 'ë‹¤ì–‘í•œ ì¸ì¢…ì˜ ì•„ì´ë“¤', biased: false,
                      feedback: { title: 'ê³µì •í•´ìš”! ğŸŒ', reason: 'ê¸€ë¡œë²Œ ë‹¤ì–‘ì„±', explanation: 'ëª¨ë“  ì¸ì¢…ì˜ ì–´ë¦°ì´ê°€ ë™ë“±í•˜ê²Œ í‘œí˜„ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.' }}
                  ]}
            ];

            const handleSelect = (image) => {
                setSelectedImage(image);
                setShowFeedback(true);
                const isCorrect = !image.biased;
                
                if (isCorrect) {
                    updateScore('stage2', 15, cases[currentCase].id);
                } else {
                    updateScore('stage2', 0, cases[currentCase].id);
                }
            };

            const handleNext = () => {
                if (currentCase < cases.length - 1) {
                    setCurrentCase(currentCase + 1);
                    setSelectedImage(null);
                    setShowFeedback(false);
                    setShowHints(false);
                } else {
                    goToStage(3);
                }
            };

            const c = cases[currentCase];

            return (
                <div className="bg-white rounded-3xl shadow-2xl p-8 md:p-12 fade-in">
                    <div className="text-center mb-8">
                        <div className="text-6xl mb-4">{c.emoji}</div>
                        <div className="inline-block bg-purple-100 text-purple-800 px-4 py-2 rounded-full font-bold mb-4">ì‚¬ë¡€ {currentCase + 1} / {cases.length}</div>
                        <h2 className="text-3xl font-bold text-gray-800 mb-4">{c.title}</h2>
                    </div>
                    <div className="bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-6 mb-8 border-2 border-purple-200 text-center">
                        <p className="text-2xl font-bold text-purple-700 mb-4">{c.question}</p>
                        {!showFeedback && (
                            <button 
                                onClick={() => setShowHints(!showHints)} 
                                className="text-sm font-bold text-purple-600 border border-purple-300 px-4 py-2 rounded-full hover:bg-purple-50 transition-colors shadow-sm"
                            >
                                {showHints ? "ğŸ’¡ íŒíŠ¸ ìˆ¨ê¸°ê¸°" : "ğŸ” íŒíŠ¸ ë³´ê¸°"}
                            </button>
                        )}
                    </div>

                    {!showFeedback ? (
                        <div className="grid md:grid-cols-2 gap-8 mb-8">
                            {c.images.map(img => (
                                <div key={img.id} className="bg-gradient-to-br from-gray-50 to-gray-100 p-8 rounded-3xl border-4 border-gray-200 transition-all shadow-md relative group">
                                    <div className="text-center mb-6">
                                        <div className="inline-block bg-purple-100 px-4 py-2 rounded-full font-bold text-purple-700 mb-4">ì´ë¯¸ì§€ {img.id}</div>
                                    </div>
                                    <div className="text-7xl mb-6 text-center leading-tight">{img.visual}</div>
                                    <p className={`text-center text-gray-600 text-base font-medium min-h-[1.5rem] transition-opacity duration-300 mb-6 ${showHints ? 'opacity-100' : 'opacity-0'}`}>
                                        {img.detail}
                                    </p>
                                    <button onClick={() => handleSelect(img)} className="w-full bg-white border-2 border-purple-500 text-purple-600 font-bold py-3 rounded-xl hover:bg-purple-500 hover:text-white transition-all transform hover:scale-105 shadow-md">
                                        ì„ íƒí•˜ê¸°
                                    </button>
                                </div>
                            ))}
                        </div>
                    ) : (
                        <div className={`rounded-3xl p-8 mb-8 fade-in border-4 ${selectedImage.biased ? 'bg-orange-50 border-orange-300 shake' : 'bg-green-50 border-green-300'}`}>
                            <div className="flex items-start mb-6">
                                <div className="text-6xl mr-6">{selectedImage.biased ? 'ğŸ˜¢' : 'ğŸ‰'}</div>
                                <div className="flex-1">
                                    <h3 className={`text-3xl font-bold mb-4 ${selectedImage.biased ? 'text-orange-800' : 'text-green-800'}`}>
                                        {selectedImage.feedback.title}
                                    </h3>
                                    <p className="text-xl font-bold mb-4">{selectedImage.feedback.reason}</p>
                                    <p className="text-lg mb-6">{selectedImage.feedback.explanation}</p>
                                </div>
                            </div>
                        </div>
                    )}
                    <div className="flex justify-center">
                        {showFeedback && (
                            <button onClick={handleNext} className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xl font-bold py-5 px-8 rounded-2xl hover:shadow-2xl transform hover:scale-105 transition-all">
                                {currentCase < cases.length - 1 ? 'ë‹¤ìŒ ì‚¬ë¡€ â†’' : 'í•µì‹¬ ì •ë¦¬ í•™ìŠµí•˜ê¸° ğŸ“–'}
                            </button>
                        )}
                    </div>
                </div>
            );
        }

        function Stage3({ goToStage, updateScore, completedStages }) {
            const [isLearning, setIsLearning] = useState(true); 
            const [currentQ, setCurrentQ] = useState(0);
            const [selectedId, setSelectedId] = useState(null);
            const [showFeedback, setShowFeedback] = useState(false);

            const questions = [
                { id: 1, text: "AIê°€ ê³µì •í•˜ë ¤ë©´", explanation: "AIê°€ ê³µì •í•˜ë ¤ë©´ ë‹¤ì–‘í•œ ë°ì´í„°ë¥¼ ê· í˜•ìˆê²Œ í•™ìŠµí•´ì•¼ í•´ìš”.",
                  options: [
                    { id: 'a', text: "ë‹¤ì–‘í•œ ë°ì´í„°ë¥¼ ê· í˜•ìˆê²Œ í•™ìŠµí•´ì•¼ í•œë‹¤", correct: true },
                    { id: 'b', text: "ë§ì€ ì‚¬ëŒë“¤ì´ ì¢‹ì•„í•˜ëŠ” ê²°ê³¼ë§Œ ë§Œë“¤ì–´ì•¼ í•œë‹¤", correct: false },
                    { id: 'c', text: "ìµœëŒ€í•œ ë¹ ë¥´ê²Œ ë‹µë³€ì„ ìƒì„±í•´ì•¼ í•œë‹¤", correct: false },
                    { id: 'd', text: "ê°œë°œìì˜ ì˜ê²¬ë§Œ ë°˜ì˜í•´ì•¼ í•œë‹¤", correct: false }
                  ]},
                { id: 2, text: "AI í¸í–¥ì´ ìƒê¸°ëŠ” ì£¼ëœ ì´ìœ ëŠ”", explanation: "AI í¸í–¥ì€ í•™ìŠµ ë°ì´í„°ê°€ íŠ¹ì • ì§‘ë‹¨ì— í¸ì¤‘ë˜ì–´ ìˆì„ ë•Œ ë°œìƒí•´ìš”.",
                  options: [
                    { id: 'a', text: "AIê°€ ì¼ë¶€ëŸ¬ ì°¨ë³„í•˜ë ¤ê³  í•´ì„œì´ë‹¤", correct: false },
                    { id: 'b', text: "í•™ìŠµ ë°ì´í„°ê°€ íŠ¹ì • ì§‘ë‹¨ì— í¸ì¤‘ë˜ì–´ ìˆì–´ì„œì´ë‹¤", correct: true },
                    { id: 'c', text: "AIê°€ ë„ˆë¬´ ë³µì¡í•œ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•´ì„œì´ë‹¤", correct: false },
                    { id: 'd', text: "AIì˜ ì²˜ë¦¬ ì†ë„ê°€ ëŠë ¤ì„œì´ë‹¤", correct: false }
                  ]},
                { id: 3, text: "í¸í–¥ëœ AIë¥¼ ë°œê²¬í–ˆì„ ë•Œ ìš°ë¦¬ê°€ ì·¨í•´ì•¼ í•  íƒœë„ëŠ”", explanation: "í¸í–¥ì„ ì¸ì‹í•˜ê³  ë¹„íŒì ìœ¼ë¡œ ì‚¬ê³ í•´ì•¼ í•´ìš”.",
                  options: [
                    { id: 'a', text: "AIì˜ ê²°ê³¼ë¥¼ ë¬´ì¡°ê±´ ë¯¿ê³  ë”°ë¼ì•¼ í•œë‹¤", correct: false },
                    { id: 'b', text: "í¸í–¥ì„ ì¸ì‹í•˜ê³  ë¹„íŒì ìœ¼ë¡œ ì‚¬ê³ í•´ì•¼ í•œë‹¤", correct: true },
                    { id: 'c', text: "AI ì‚¬ìš©ì„ ì „ë©´ ê¸ˆì§€í•´ì•¼ í•œë‹¤", correct: false },
                    { id: 'd', text: "ì•„ë¬´ ì¡°ì¹˜ë„ ì·¨í•˜ì§€ ì•Šê³  ë¬´ì‹œí•´ì•¼ í•œë‹¤", correct: false }
                  ]},
                { id: 4, text: "ê³µì •í•œ AIë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€", explanation: "ë‹¤ì–‘í•œ ì§‘ë‹¨ì˜ ë°ì´í„°ë¥¼ ê· í˜•ìˆê²Œ ìˆ˜ì§‘í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•´ìš”.",
                  options: [
                    { id: 'a', text: "AI ê°œë°œ ì†ë„ë¥¼ ë†’ì´ëŠ” ê²ƒì´ë‹¤", correct: false },
                    { id: 'b', text: "ìµœì‹  ê¸°ìˆ ë§Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤", correct: false },
                    { id: 'c', text: "ë‹¤ì–‘í•œ ì§‘ë‹¨ì˜ ë°ì´í„°ë¥¼ ê· í˜•ìˆê²Œ ìˆ˜ì§‘í•˜ëŠ” ê²ƒì´ë‹¤", correct: true },
                    { id: 'd', text: "AIë¥¼ ê°€ëŠ¥í•œ í•œ ì ê²Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤", correct: false }
                  ]},
                { id: 5, text: "AIì˜ í¸í–¥ì„ ì¤„ì´ê¸° ìœ„í•œ ê°œë°œìì˜ ë…¸ë ¥ìœ¼ë¡œ ì˜³ì€ ê²ƒì€", explanation: "ì•Œê³ ë¦¬ì¦˜ì´ íŠ¹ì • ì§‘ë‹¨ì— ìœ ë¦¬í•˜ê²Œ ì‘ë™í•˜ì§€ ì•ŠëŠ”ì§€ ê³„ì† ì ê²€í•´ì•¼ í•©ë‹ˆë‹¤.",
                  options: [
                    { id: 'a', text: "ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•´ í¸í–¥ì„ ë¬´ì‹œí•œë‹¤", correct: false },
                    { id: 'b', text: "ì•Œê³ ë¦¬ì¦˜ì˜ ê³µì •ì„±ì„ ì£¼ê¸°ì ìœ¼ë¡œ ì ê²€í•œë‹¤", correct: true },
                    { id: 'c', text: "ì‚¬ìš©ìê°€ ì›í•˜ëŠ” í¸í–¥ëœ ê²°ê³¼ë§Œ ì œê³µí•œë‹¤", correct: false },
                    { id: 'd', text: "ë°ì´í„° ìˆ˜ì§‘ ê³¼ì •ì„ ë¹„ë°€ë¡œ ìœ ì§€í•œë‹¤", correct: false }
                  ]},
                { id: 6, text: "ìƒí™œ ì†ì—ì„œ AIë¥¼ í˜„ëª…í•˜ê²Œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€", explanation: "AIë„ ì‹¤ìˆ˜í•˜ê±°ë‚˜ í¸í–¥ë  ìˆ˜ ìˆìŒì„ ì•Œê³ , ì—¬ëŸ¬ ì •ë³´ë¥¼ ë¹„êµí•˜ë©° ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.",
                  options: [
                    { id: 'a', text: "AIê°€ ì£¼ëŠ” ì •ë³´ë§Œ ì •ë‹µì´ë¼ê³  ìƒê°í•œë‹¤", correct: false },
                    { id: 'b', text: "AIê°€ ë§Œë“  ì´ë¯¸ì§€ë‚˜ ê¸€ì˜ í¸í–¥ì„±ì„ ì‚´í´ë³¸ë‹¤", correct: true },
                    { id: 'c', text: "ë¬´ì¡°ê±´ AIê°€ ì‹œí‚¤ëŠ” ëŒ€ë¡œ í–‰ë™í•œë‹¤", correct: false },
                    { id: 'd', text: "ê²€ì¦ë˜ì§€ ì•Šì€ AI ê²°ê³¼ë¥¼ ê·¸ëŒ€ë¡œ ê³µìœ í•œë‹¤", correct: false }
                  ]},
                { id: 7, text: "AI í¸í–¥ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ê°€ì¥ í•„ìš”í•œ ê°€ì¹˜ëŠ”", explanation: "ë‹¤ì–‘ì„±ì„ ì¡´ì¤‘í•˜ê³  í¬ìš©í•˜ëŠ” ê°€ì¹˜ê°€ ê³µì •í•œ AI ì œì‘ì˜ í•µì‹¬ì…ë‹ˆë‹¤.",
                  options: [
                    { id: 'a', text: "íš¨ìœ¨ì„±ê³¼ ì†ë„", correct: false },
                    { id: 'b', text: "ë‹¤ì–‘ì„±ê³¼ í¬ìš©ì„±", correct: true },
                    { id: 'c', text: "ê²½ìŸê³¼ ì°¨ë³„", correct: false },
                    { id: 'd', text: "ìµëª…ì„±ê³¼ íì‡„ì„±", correct: false }
                  ]},
                { id: 8, text: "ë‹¤ìŒ ì¤‘ 'ë°ì´í„° í¸í–¥'ì„ ë°©ì§€í•˜ëŠ” ë°©ë²•ì€", explanation: "íŠ¹ì • ë°ì´í„°ë§Œ ëª¨ìœ¼ì§€ ì•Šê³  ëª¨ë“  ì§‘ë‹¨ì˜ ì •ë³´ë¥¼ ê³ ë¥´ê²Œ ìˆ˜ì§‘í•´ì•¼ í•©ë‹ˆë‹¤.",
                  options: [
                    { id: 'a', text: "í•œ ê°€ì§€ ì¸ì¢…ì˜ ì‚¬ì§„ë§Œ ëŒ€ëŸ‰ìœ¼ë¡œ í•™ìŠµì‹œí‚¨ë‹¤", correct: false },
                    { id: 'b', text: "ì—¬ëŸ¬ ì¸ì¢…ê³¼ ì„±ë³„ì˜ ì •ë³´ë¥¼ ê³ ë¥´ê²Œ ìˆ˜ì§‘í•œë‹¤", correct: true },
                    { id: 'c', text: "ì¸í„°ë„·ì— ê°€ì¥ ë§ì€ ìë£Œë§Œ ì‚¬ìš©í•œë‹¤", correct: false },
                    { id: 'd', text: "ë°ì´í„° ìˆ˜ì§‘ì„ ì¤‘ë‹¨í•œë‹¤", correct: false }
                  ]},
                { id: 9, text: "AI ê²°ê³¼ë¥¼ ë¹„íŒì ìœ¼ë¡œ ë³¸ë‹¤ëŠ” ê²ƒì€ ë¬´ìŠ¨ ëœ»ì¸ê°€ìš”", explanation: "ì •ë³´ë¥¼ ë¬´ì¡°ê±´ ë¯¿ì§€ ì•Šê³  ì˜ë¬¸ì„ ê°€ì§€ë©° ë‹¤ì‹œ í™•ì¸í•˜ëŠ” íƒœë„ì…ë‹ˆë‹¤.",
                  options: [
                    { id: 'a', text: "AIë¥¼ ì „í˜€ ë¯¿ì§€ ì•ŠëŠ” ê²ƒ", correct: false },
                    { id: 'b', text: "AIê°€ ì œì‹œí•œ ì •ë³´ì— ì˜¤ë¥˜ë‚˜ í¸ê²¬ì´ ì—†ëŠ”ì§€ ì‚´í”¼ëŠ” ê²ƒ", correct: true },
                    { id: 'c', text: "AIê°€ ì‹œí‚¤ëŠ” ëª¨ë“  ê²ƒì„ ë¹„ë‚œí•˜ëŠ” ê²ƒ", correct: false },
                    { id: 'd', text: "AI ì‚¬ìš©ìë¥¼ ë‚˜ì˜ê²Œ ìƒê°í•˜ëŠ” ê²ƒ", correct: false }
                  ]},
                { id: 10, text: "ê³µì •í•œ AI ì‚¬íšŒë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ëˆ„ê°€ ë…¸ë ¥í•´ì•¼ í•˜ë‚˜ìš”", explanation: "ê°œë°œìë¿ë§Œ ì•„ë‹ˆë¼ ì‚¬ìš©í•˜ëŠ” ìš°ë¦¬ ëª¨ë‘ê°€ ê´€ì‹¬ì„ ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤.",
                  options: [
                    { id: 'a', text: "AIë¥¼ ë§Œë“œëŠ” ê°œë°œìë§Œ ë…¸ë ¥í•˜ë©´ ëœë‹¤", correct: false },
                    { id: 'b', text: "êµ­ê°€ì—ì„œ ë²•ìœ¼ë¡œ ê°•ì œí•˜ê¸°ë§Œ í•˜ë©´ ëœë‹¤", correct: false },
                    { id: 'c', text: "ê°œë°œìì™€ ì‚¬ìš©ì ë“± ìš°ë¦¬ ëª¨ë‘ê°€ í•¨ê»˜ ë…¸ë ¥í•´ì•¼ í•œë‹¤", correct: true },
                    { id: 'd', text: "ë…¸ë ¥í•´ë„ ì†Œìš©ì—†ìœ¼ë¯€ë¡œ ê°€ë§Œíˆ ìˆëŠ”ë‹¤", correct: false }
                  ]}
            ];

            const handleChoice = (opt) => {
                setSelectedId(opt.id);
                setShowFeedback(true);
                
                if (opt.correct) {
                    updateScore('stage3', 10, questions[currentQ].id);
                } else {
                    updateScore('stage3', 0, questions[currentQ].id);
                }
            };

            const handleNext = () => {
                if (currentQ < questions.length - 1) {
                    setCurrentQ(currentQ + 1);
                    setSelectedId(null);
                    setShowFeedback(false);
                } else {
                    goToStage(4);
                }
            };

            if (isLearning) {
                return (
                    <div className="bg-white rounded-3xl shadow-2xl p-8 md:p-12 fade-in">
                        <div className="text-center mb-8">
                            <div className="text-6xl mb-6">ğŸ“–</div>
                            <h2 className="text-3xl font-bold text-gray-800 mb-4">ê³µì •í•œ AIì™€ í¸í–¥ ì•Œì•„ë³´ê¸°</h2>
                            <p className="text-lg text-gray-600 mb-8">í€´ì¦ˆë¥¼ í’€ê¸° ì „ì— ì¤‘ìš”í•œ ë‚´ìš©ì„ í•¨ê»˜ ì •ë¦¬í•´ ë³¼ê¹Œìš”?</p>
                        </div>
                        <div className="space-y-6 mb-10 text-left">
                            <div className="bg-purple-50 rounded-2xl p-6 border-l-8 border-purple-400">
                                <h3 className="text-xl font-bold text-purple-800 mb-2">1. AI í¸í–¥ì´ë€ ë¬´ì—‡ì¸ê°€ìš”?</h3>
                                <p className="text-gray-700 leading-relaxed">
                                    AIê°€ íŠ¹ì • ì„±ë³„, ì¸ì¢…, ë‚˜ì´ ë“±ì„ ì°¨ë³„í•˜ê±°ë‚˜ <strong>ê³ ì •ê´€ë…ì´ ì„ì¸ ê²°ê³¼</strong>ë¥¼ ë‚´ë†“ëŠ” ê²ƒì„ ë§í•´ìš”. ì´ëŠ” AIê°€ ê³µë¶€í•˜ëŠ” 'ë°ì´í„°'ê°€ í•œìª½ìœ¼ë¡œ ì¹˜ìš°ì³ ìˆì„ ë•Œ ì£¼ë¡œ ë°œìƒí•©ë‹ˆë‹¤.
                                </p>
                            </div>
                            <div className="bg-blue-50 rounded-2xl p-6 border-l-8 border-blue-400">
                                <h3 className="text-xl font-bold text-blue-800 mb-2">2. ê³µì •í•œ AIë¥¼ ë§Œë“¤ë ¤ë©´?</h3>
                                <p className="text-gray-700 leading-relaxed">
                                    <strong>ë‹¤ì–‘í•œ ì§‘ë‹¨ì˜ ë°ì´í„°</strong>ë¥¼ ê³¨ê³ ë£¨ ìˆ˜ì§‘í•´ì„œ í•™ìŠµì‹œì¼œì•¼ í•´ìš”. ë˜í•œ ê°œë°œìë“¤ì€ ì•Œê³ ë¦¬ì¦˜ì´ ëˆ„êµ°ê°€ë¥¼ ì°¨ë³„í•˜ì§€ ì•ŠëŠ”ì§€ <strong>ì£¼ê¸°ì ìœ¼ë¡œ ì ê²€</strong>í•˜ëŠ” ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤.
                                </p>
                            </div>
                            <div className="bg-green-50 rounded-2xl p-6 border-l-8 border-green-400">
                                <h3 className="text-xl font-bold text-green-800 mb-2">3. ìš°ë¦¬ì˜ ì˜¬ë°”ë¥¸ íƒœë„ëŠ”?</h3>
                                <p className="text-gray-700 leading-relaxed">
                                    AIì˜ ê²°ê³¼ë¥¼ ë¬´ì¡°ê±´ ì •ë‹µì´ë¼ê³  ë¯¿ê¸°ë³´ë‹¤, <strong>ë¹„íŒì ì¸ ì‹œê°</strong>ìœ¼ë¡œ ë°”ë¼ë³´ëŠ” ìŠµê´€ì„ ê°€ì ¸ì•¼ í•´ìš”. "ì´ ê²°ê³¼ì— í¸ê²¬ì´ ì„ì—¬ ìˆì§€ëŠ” ì•Šì„ê¹Œ?" í•˜ê³  ê³ ë¯¼í•´ ë³´ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.
                                </p>
                            </div>
                        </div>
                        <button onClick={() => setIsLearning(false)} className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xl font-bold py-5 px-8 rounded-2xl hover:shadow-2xl transform hover:scale-105 transition-all">
                            í•™ìŠµ ì™„ë£Œ! í•µì‹¬ ì •ë¦¬ í€´ì¦ˆ í’€ê¸° ğŸ“
                        </button>
                    </div>
                );
            }

            const q = questions[currentQ];
            const isCorrect = q.options.find(o => o.id === selectedId)?.correct;

            return (
                <div className="bg-white rounded-3xl shadow-2xl p-8 md:p-12 fade-in">
                    <div className="text-center mb-8">
                        <div className="text-6xl mb-6">ğŸ¯</div>
                        <h2 className="text-3xl font-bold text-gray-800 mb-4">í•µì‹¬ ë‚´ìš© ì •ë¦¬í•˜ê¸°</h2>
                        <div className="mt-4 inline-block bg-purple-100 text-purple-800 px-6 py-2 rounded-full font-bold">
                            ë¬¸ì œ {currentQ + 1} / {questions.length}
                        </div>
                    </div>
                    
                    <div className="bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-8 border-2 border-purple-200 mb-8">
                        <h3 className="text-2xl font-bold text-gray-800 mb-6 text-center">"{q.text}..."</h3>
                        <div className="space-y-4">
                            {q.options.map(opt => (
                                <button key={opt.id} onClick={() => !showFeedback && handleChoice(opt)} disabled={showFeedback}
                                    className={`w-full text-left p-5 rounded-xl border-2 transition-all ${
                                        showFeedback && opt.correct ? 'border-green-500 bg-green-50' :
                                        showFeedback && selectedId === opt.id && !opt.correct ? 'border-red-500 bg-red-50' :
                                        selectedId === opt.id ? 'border-purple-500 bg-purple-100' : 'border-gray-200 bg-white hover:border-purple-300'
                                    }`}>
                                    <div className="flex items-center">
                                        <div className={`w-6 h-6 rounded-full border-2 mr-4 flex items-center justify-center ${
                                            showFeedback && opt.correct ? 'bg-green-500 border-green-500' :
                                            showFeedback && selectedId === opt.id && !opt.correct ? 'bg-red-500 border-red-500' :
                                            selectedId === opt.id ? 'bg-purple-500 border-purple-500' : 'border-gray-300'
                                        }`}>
                                            {(selectedId === opt.id || (showFeedback && opt.correct)) && <span className="text-white text-xs">âœ“</span>}
                                        </div>
                                        <span className="text-lg text-gray-700">{opt.text}</span>
                                    </div>
                                </button>
                            ))}
                        </div>
                    </div>

                    {showFeedback && (
                        <div className={`rounded-2xl p-6 mb-8 border-4 fade-in ${isCorrect ? 'bg-green-50 border-green-300' : 'bg-orange-50 border-orange-300'}`}>
                            <div className="flex items-center">
                                <span className="text-4xl mr-4">{isCorrect ? 'ğŸ‰' : 'ğŸ˜¢'}</span>
                                <div>
                                    <p className="font-bold text-lg mb-1">{isCorrect ? 'ì •ë‹µì…ë‹ˆë‹¤!' : 'ì•„ì‰½ìŠµë‹ˆë‹¤!'}</p>
                                    <p className="text-gray-700">{q.explanation}</p>
                                </div>
                            </div>
                        </div>
                    )}

                    {showFeedback && (
                        <button onClick={handleNext} className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xl font-bold py-5 px-8 rounded-2xl hover:shadow-2xl transform hover:scale-105 transition-all">
                            {currentQ < questions.length - 1 ? 'ë‹¤ìŒ ë¬¸ì œ â†’' : 'ê²°ê³¼ í™•ì¸ ë° ì¸ì¦ì„œ ë°›ê¸°! ğŸ‰'}
                        </button>
                    )}
                </div>
            );
        }

        function Stage4({ totalScore, scores, setAllStagesCompleted }) {
            const [checkedItems, setCheckedItems] = useState({});
            const certRef = useRef(null);

            const keyLearnings = [
                { id: 1, title: 'ê³µì •í•¨ì˜ ì˜ë¯¸', desc: 'ëª¨ë“  ì‚¬ëŒì—ê²Œ ë™ë“±í•œ ê¸°íšŒë¥¼ ì£¼ê³  íŠ¹ì • ì§‘ë‹¨ì„ ì°¨ë³„í•˜ì§€ ì•ŠëŠ” ê²ƒ' },
                { id: 2, title: 'AI í¸í–¥ì˜ ì›ì¸', desc: 'í•™ìŠµ ë°ì´í„°ê°€ íŠ¹ì • ì§‘ë‹¨ì— í¸ì¤‘ë˜ì–´ ìˆì„ ë•Œ ë°œìƒí•¨' },
                { id: 3, title: 'í•´ê²° ë°©ë²•', desc: 'ë‹¤ì–‘í•œ ë°ì´í„°ë¥¼ ê· í˜•ìˆê²Œ ìˆ˜ì§‘í•˜ê³  í•™ìŠµì‹œì¼œì•¼ í•¨' },
                { id: 4, title: 'ìš°ë¦¬ì˜ ì—­í• ', desc: 'AI ê²°ê³¼ë¥¼ ë¹„íŒì ìœ¼ë¡œ ë°”ë¼ë³´ê³  í¸í–¥ì„ ì¸ì‹í•´ì•¼ í•¨' }
            ];

            const handleCheckItem = (id) => {
                setCheckedItems(prev => ({ ...prev, [id]: !prev[id] }));
            };

            const allChecked = Object.keys(checkedItems).length === keyLearnings.length && Object.values(checkedItems).every(v => v);

            useEffect(() => {
                if (allChecked) { setAllStagesCompleted(true); }
            }, [allChecked, setAllStagesCompleted]);

            let level = '', emoji = '', rank = '', comment = '';
            if (totalScore >= 250) { level = 'ì…œë¡ í™ˆì¦ˆê¸‰'; emoji = 'ğŸ©'; rank = 'MASTER'; comment = 'ë§ˆìŠ¤í„° íƒì •!'; }
            else if (totalScore >= 180) { level = 'ëª…íƒì •ê¸‰'; emoji = 'ğŸ§'; rank = 'EXPERT'; comment = 'ìˆ™ë ¨ íƒì •!'; }
            else { level = 'ì‹ ì°¸ íƒì •ê¸‰'; emoji = 'ğŸ”'; rank = 'ROOKIE'; comment = 'ê²¬ìŠµ íƒì •!'; }

            const downloadCert = () => {
                html2canvas(certRef.current, { scale: 2, backgroundColor: '#ffffff' }).then(canvas => {
                    const link = document.createElement('a');
                    link.download = 'AIí¸í–¥íƒì •ë‹¨_ì¸ì¦ì„œ.png';
                    link.href = canvas.toDataURL();
                    link.click();
                });
            };

            return (
                <div className="bg-white rounded-3xl shadow-2xl p-8 md:p-12 fade-in">
                    <div className="text-center mb-8">
                        <div className="text-7xl mb-6 bounce">ğŸ†</div>
                        <h2 className="text-4xl font-bold text-gray-800 mb-6">íƒì • í™œë™ ì™„ë£Œ!</h2>
                    </div>
                    <div className="bg-gradient-to-br from-blue-50 to-cyan-50 rounded-3xl p-8 text-left border-2 border-blue-200 mb-6">
                        <h3 className="text-2xl font-bold text-blue-800 mb-4 text-center">ğŸ“š ì˜¤ëŠ˜ ë°°ìš´ í•µì‹¬ ë‚´ìš©</h3>
                        <p className="text-center text-gray-600 mb-6">ê° í•­ëª©ì„ í™•ì¸í•˜ë©° ì²´í¬í•´ë³´ì„¸ìš”!</p>
                        <div className="space-y-4">
                            {keyLearnings.map(item => (
                                <div key={item.id} onClick={() => handleCheckItem(item.id)}
                                    className={`bg-white rounded-xl p-5 flex items-start cursor-pointer transition-all duration-300 border-2 ${
                                        checkedItems[item.id] ? 'bg-green-50 border-green-300' : 'border-gray-200 hover:border-blue-300'
                                    }`}>
                                    <div className={`w-8 h-8 rounded-lg border-2 mr-4 flex items-center justify-center flex-shrink-0 transition-all ${
                                        checkedItems[item.id] ? 'bg-green-500 border-green-500' : 'bg-white border-gray-400'
                                    }`}>
                                        {checkedItems[item.id] && <span className="text-white text-xl font-bold">âœ“</span>}
                                    </div>
                                    <div className="flex-1">
                                        <h4 className="font-bold text-lg text-gray-800 mb-1">{item.title}</h4>
                                        <p className="text-gray-700">{item.desc}</p>
                                    </div>
                                </div>
                            ))}
                        </div>
                        {allChecked && (
                            <div className="mt-6 bg-green-100 border-2 border-green-400 rounded-xl p-4 text-center fade-in">
                                <p className="text-green-800 font-bold text-lg">ğŸ‰ ëª¨ë“  í•µì‹¬ ë‚´ìš©ì„ í™•ì¸í–ˆì–´ìš”!</p>
                            </div>
                        )}
                    </div>
                    <div ref={certRef} className="bg-gradient-to-br from-purple-50 via-white to-pink-50 rounded-3xl p-10 mb-8 border-4 border-purple-300 shadow-2xl">
                        <div className="text-center">
                            <div className="text-6xl mb-4">{emoji}</div>
                            <h3 className="text-3xl font-bold text-purple-800 mb-4">AI í¸í–¥ íƒì •ë‹¨ ì¸ì¦ì„œ</h3>
                        </div>
                        <div className="bg-white bg-opacity-60 rounded-2xl p-8">
                            <p className="text-gray-700 text-lg mb-6 text-center">ì´ ì¸ì¦ì„œëŠ” ë‹¤ìŒ ì‚¬ëŒì´</p>
                            <div className="bg-yellow-100 border-2 border-yellow-400 rounded-xl p-4 mb-6">
                                <input type="text" placeholder="ì—¬ê¸°ì— ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" className="text-2xl font-bold text-center w-full bg-transparent border-none outline-none" />
                            </div>
                            <p className="text-gray-700 text-lg mb-4 text-center">AI í¸í–¥ì— ëŒ€í•œ ì´í•´ì™€ ë¹„íŒì  ì‚¬ê³  ëŠ¥ë ¥ì„<br/>ì„±ê³µì ìœ¼ë¡œ í•¨ì–‘í–ˆìŒì„ ì¦ëª…í•©ë‹ˆë‹¤.</p>
                            <div className="grid grid-cols-3 gap-4 my-6 text-sm">
                                {[
                                    { title: '1ë‹¨ê³„', score: scores.stage1, max: STAGE1_MAX },
                                    { title: '2ë‹¨ê³„', score: scores.stage2, max: STAGE2_MAX },
                                    { title: '3ë‹¨ê³„', score: scores.stage3, max: STAGE3_MAX }
                                ].map((s, i) => (
                                    <div key={i} className="bg-purple-50 rounded-lg p-3 text-center">
                                        <div className="font-bold text-purple-800 mb-1">{s.title}</div>
                                        <div className="text-2xl font-bold text-purple-600">{s.score}</div>
                                        <div className="text-xs text-gray-600">/ {s.max}ì </div>
                                    </div>
                                ))}
                            </div>
                            <div className="bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl p-6 mb-4 text-center">
                                <div className="text-sm text-gray-600 mb-2">ìµœì¢… ì ìˆ˜</div>
                                <div className="text-5xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">{totalScore}ì </div>
                                <div className="text-sm text-gray-600 mt-1">/ {MAX_SCORE}ì </div>
                            </div>
                            <div className="bg-yellow-50 border-2 border-yellow-300 rounded-xl p-4 text-center">
                                <div className="text-sm text-yellow-800 mb-1">íƒì • ë ˆë²¨</div>
                                <div className="text-3xl font-bold text-yellow-700 mb-1">{level}</div>
                                <div className="inline-block bg-yellow-200 px-3 py-1 rounded-full text-xs font-bold text-yellow-800 mb-2">{rank}</div>
                                <div className="text-sm text-yellow-700">{comment}</div>
                            </div>
                        </div>
                        <p className="text-gray-500 text-sm mt-4 text-center">{new Date().toLocaleDateString('ko-KR')}</p>
                    </div>
                    <button onClick={downloadCert} className="w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white text-xl font-bold py-5 px-8 rounded-2xl hover:shadow-2xl transform hover:scale-105 transition-all">
                        ğŸ“¥ ì¸ì¦ì„œ ë‹¤ìš´ë¡œë“œí•˜ê¸°
                    </button>
                </div>
            );
        }

        ReactDOM.createRoot(document.getElementById('root')).render(<AIBiasDetective />);
    </script>
</body>
</html>